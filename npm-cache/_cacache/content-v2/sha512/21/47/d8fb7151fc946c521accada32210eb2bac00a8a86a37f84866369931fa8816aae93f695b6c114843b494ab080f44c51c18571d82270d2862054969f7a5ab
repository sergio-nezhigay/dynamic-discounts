{"_id":"meros","_rev":"29-5bb140fca7562f518156c1ebcd8eb4d4","name":"meros","dist-tags":{"latest":"1.3.0","beta":"1.1.0-beta.2","next":"1.2.0-next.4"},"versions":{"0.0.1":{"name":"meros","version":"0.0.1","description":"A fast multipart utility for reading streamed multipart responses","keywords":["multipart","multipart mixed","fetch","utility","reader"],"author":{"name":"Marais Rossouw","email":"hi@marais.io"},"exports":{".":{"import":"./dist/index.mjs","require":"./dist/index.js"}},"main":"dist/index.js","module":"dist/index.mjs","types":"dist/index.d.ts","scripts":{"bench":"node -r ts-node/register bench/index.ts","build":"tsc --noEmit false --declaration","format":"prettier \"{*,tests/*,src/*,bench/*,.github/**/*}.+(ts|yml)\" --write","test":"uvu tests -i util -i prelude -r ts-node/register","test:coverage":"c8 yarn run test"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"^0.0.1","@types/benchmark":"^1.0.33","@types/node":"^14.0.14","benchmark":"^2.1.4","c8":"^7.2.0","fetch-multipart-graphql":"^2.0.1","node-fetch":"^2.6.0","prettier":"^2.0.5","rxjs":"^7.0.0-beta.1","ts-node":"^8.10.2","typescript":"^3.9.6","uvu":"^0.0.17","web-streams-polyfill":"^2.1.1"},"volta":{"node":"14.5.0","yarn":"1.22.4"},"gitHead":"50861fbc52a871e65ec168528d22ce82deb5d4fc","_id":"meros@0.0.1","_nodeVersion":"14.5.0","_npmVersion":"6.14.5","dist":{"integrity":"sha512-VWKyqDICgGQlmPWms3nRLdoATV64RL7B6dEomkBCeQf3c0m1F+juB4T5t2V3s1VU1p5QPFHK7IP0Hj6vhjXaSg==","shasum":"1250ff265db87c3b614d72f5c66c17367486e9a1","tarball":"https://registry.npmjs.org/meros/-/meros-0.0.1.tgz","fileCount":13,"unpackedSize":15060,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfBFTUCRA9TVsSAnZWagAAdDYP/2ePGsDt5yDqDOZ8e6av\ncgeysVG00GBv3GXO1wyxD0ppHHzQ7a2L8CtQ4TjBdcL7Pz3Vy1uxPQpRKKju\nnZjXiGE9gcR+Pq7TrlQL2E62Z/n2qWJULXsACVDrcwNEhHC79pO/BA4xe0gQ\nkgBIxcdGVS4M0mn/AJKT8N83/lo0DfjTLB4jtdjF07ijAS0O/Wpqd9fitUvl\n3MG8AYM39g76X/q/TQ5bsGybujV7lZocOAH3viOYAKMN3pM+oyAqZPf35rDn\nVL0A4AelNgDFCUR5pDO3IirdRHnJGXAShZDjWPxjhFtLSnKDLC2GkNbPEMZK\nNX1lP+gF9zUDLjqpI0IcvlUdBt7LLIrz6bq3crRP5uxRRMk0zGEuXFGX2QoW\nbcYv57bjXYqdtTlQHHfg1m1EJQP4eKXIWKJECv+A44xIVWBIg8sW+mDM04Ku\nB3f2Mj9mL3rgp/KoqWxZH8aJBqe2Iorg4FoU5GrKk5Bh9YV5IajLTHavFyx7\nd2FGLpIbayL2+p4ENJbabgT+1kr/xSY3s/etoYADQLa/uqy9LoEemwxNOy79\ngk1ouwj42s2hEGy3CpxvdzyF55Bm3il/W5k9619cuyKtahG03QO79sJoaVTS\nEv+puFnkcVE1CZDxUekmKqI/uhB6saguB4R6RtTOk3QT2vNdKE3jTdjlxE/D\niONe\r\n=9n74\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICBHUsBS6J+o/sEY/y6k5R7K1DVZflE2ljHyJOxHH6xEAiB5ZO8yZQY7pD2Zk/d2rdD++WHxWkNKv23DHgcXquZXng=="}]},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_0.0.1_1594119380086_0.1708030506309859"},"_hasShrinkwrap":false},"0.0.2":{"name":"meros","version":"0.0.2","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/mariasr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"hi@marais.io","url":"https://marais.io"},"exports":{".":{"import":"./dist/index.mjs","require":"./dist/index.js"}},"main":"dist/index.js","unpkg":"dist/index.min.js","module":"dist/index.mjs","types":"dist/index.d.ts","scripts":{"bench":"node -r ts-node/register bench/index.ts","build":"rollup -c","format":"prettier \"{*,tests/*,src/*,bench/*,.github/**/*}.+(ts|js|yml|md)\" --write","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -i util -i prelude tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"^0.0.1","@rollup/plugin-node-resolve":"8.4.0","@types/benchmark":"^1.0.33","@types/node":"^14.0.25","benchmark":"^2.1.4","fetch-multipart-graphql":"^2.0.1","node-fetch":"^2.6.0","prettier":"^2.0.5","rollup":"2.23.0","rollup-plugin-terser":"6.1.0","rollup-plugin-typescript2":"0.27.1","ts-node":"^8.10.2","typescript":"^3.9.7","uvu":"^0.3.0","web-streams-polyfill":"^3.0.0"},"engines":{"node":">=10"},"volta":{"node":"14.5.0","yarn":"1.22.4"},"gitHead":"f184cc257e14870b0e91804ee9634da35dc39075","bugs":{"url":"https://github.com/mariasr/meros/issues"},"homepage":"https://github.com/mariasr/meros#readme","_id":"meros@0.0.2","_nodeVersion":"14.5.0","_npmVersion":"6.14.5","dist":{"integrity":"sha512-1tHeUi7PwqwQn8VhMw6FiaE640N/zeSNbButYUqgbdAfUw8C3fHXmiUgFSMEahXo3eacXWgDKSZDBfMRTl2lwA==","shasum":"df24616ac307bd64b8c24301501e658cd3979c20","tarball":"https://registry.npmjs.org/meros/-/meros-0.0.2.tgz","fileCount":7,"unpackedSize":10725,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfGl4dCRA9TVsSAnZWagAAnzUP/1NyjHAq+spAP2r09xos\n7bdk0CzBjnUVhHd8cpa8n6ca7pkZvQXRfGApWYGC5jBpnoGjrLLKhlw5epRI\nY6Gkxt93yff2XmDhHOw39ruIzHcphviRFjczNPKuRj7GzcVKOd5cK3ENE1/x\nhUoX0v5kfjsIAZO1MVl1kwsQHBKSpouaGjxOStry1HAkXqGaxyXziXxjF8DM\ndDh0+ndRJ53/9FQa4/bm+vUjIp5Nq+kEVnGJdfGEsTHCVdfxC1kkrwpXEEDs\nDdMeVLs4dOmU1Try2PWm649UzyAlB1sAY+clE42+wT4V8uJ5rhOfQFYY1uaM\nHfYC9yyn/CWGFqg6DE+xfVmX2oJ4lJTkqhfpGzePlnTNGttTfdIMethTncff\nAqGJokoYSQN+cU/zWwMrnqi5/0WBhZN2UBEMQDw3eMVmAt8MQdwiQBQewQx0\ntJKVxFGUpHUtQt2AVVI6Z6/fPq8H1y8PrZJ+muGakDaJ9+dI2ztzA5bUavMn\nGq/SGUuIMZ/aF4/qnCN5soO2AkISOSLhC9mpH4dKMOumYQtqz7TFIP2HrDLi\nUfR8oUQDRz8S9yWRs4ODdPi0YMIq4q7cvXBg13GpTHT+qA1nTwpS8iFMr3gP\n8cx2OBtAuWSWGn3oM0eG2VHOvDqQtDpsyxlPxnbL1z0sLsx0k8yPpmQOyf/Y\nQ+HA\r\n=WW9i\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCVLnxDh3N0iEsViYoBWaOz5u1vnqaZtmQss8VDyO/58gIgHyQSO0nxEq6HC1w9rMnZdL/VrorqOzug2Son4xnnD0Y="}]},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_0.0.2_1595563549017_0.4766083988023049"},"_hasShrinkwrap":false},"0.0.3":{"name":"meros","version":"0.0.3","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"hi@marais.io","url":"https://marais.io"},"exports":{".":{"import":"./dist/index.mjs","require":"./dist/index.js"}},"main":"dist/index.js","unpkg":"dist/index.min.js","module":"dist/index.mjs","types":"types/index.d.ts","scripts":{"bench":"node -r ts-node/register bench/index.ts","build":"rollup -c","format":"prettier \"{*,tests/*,src/*,bench/*,.github/**/*}.+(ts|js|yml|md)\" --write","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -i util -i prelude tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"^0.0.1","@rollup/plugin-node-resolve":"8.4.0","@types/benchmark":"^1.0.33","@types/node":"^14.0.25","benchmark":"^2.1.4","fetch-multipart-graphql":"^2.0.1","node-fetch":"^2.6.0","prettier":"^2.0.5","rollup":"2.23.0","rollup-plugin-terser":"6.1.0","rollup-plugin-typescript2":"0.27.1","ts-node":"^8.10.2","typescript":"^3.9.7","uvu":"^0.3.0","web-streams-polyfill":"^3.0.0"},"engines":{"node":">=10"},"volta":{"node":"14.5.0","yarn":"1.22.4"},"gitHead":"4f3d580447f53a0d8e444ee63a7fcb8392844079","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@0.0.3","_nodeVersion":"14.5.0","_npmVersion":"6.14.5","dist":{"integrity":"sha512-tNgLfdJ2KTtS9fPg221J0MqkyzPZL1uwyCSWbfuDQthPuUC+Tl5vMyVo53hmD5UAJM5CJY5YOzMQy5LGD4HjNA==","shasum":"24a4852736e623b4b5ccc778ca7ca7119bbaeb22","tarball":"https://registry.npmjs.org/meros/-/meros-0.0.3.tgz","fileCount":7,"unpackedSize":10766,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJffv3lCRA9TVsSAnZWagAA6ckP/jMhTNoRnlxU9LG6xoHK\nTMwMP2KPibGk9jvFioIIIVWWceoou9b1zIsVqFkdQY+Uh3y/s4OO7NDLeXoF\n8DGuLFYdqu1zCUflO56CWMsgoGx+qr1U1kqhjMmWAnmNy/FiS2qyqLKT2Fd1\n2uDFthp+Vzbv19QNKa4xPUv3+/MMdztB5TOVn6DJgSIua6fDjp60zg0bb/F5\nfx+3v6S+Q8KoehRimF1HiiH/MI6YPqYF3JqQBTXfRElWgDJt5UsPliyUoJrh\n7c4+bGwClp3hlvG9h8W2voYZMtXXBtQLeT5tOEuvHtBf5y6CJZTKGLfV01Or\nOb5u+Qy3W57BJfzlCaF9q4nyanfpHpcOvMZG6qi1D3y2E9AAzM2v0CGMA9wD\nFo2Ul1W1dAtHtM/4JS22BAqUuH+yb+zYHey4ApbKwVYRWSviBhi3NRSbwVWq\nyEI1jgbVnyHH7spZrNyIGZHM+5c6lkV/CFlA3VGvNWZD+UBLfvyMFrCd65Ij\nXji2B4qZfcK5lPAtbz/t+OqGz3gm6CnCJs6g+2gRyYzLmEAIFHAwjC9LjH+K\nIbQPEv+o1KBMSfhBJVsk+m4dbT+WuQuYYU5roO085NOkrymeItSDmeHvEybE\nF+Omds0FBE1/37qHMetC7TTusPhvsaNvfpZ4NKXgqpfWkglMnrutGnDSrha2\nueCy\r\n=CbJO\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC8hyyEKNuRAR8av9tn4vBQig3d9VPRzIP8FjGamsviJAIhAKC4GeVGeyAPzjQm2PRYeb23u3am0RYqMKPQvk+4ezsr"}]},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_0.0.3_1602158053351_0.3834050380075753"},"_hasShrinkwrap":false},"1.0.0-beta.1":{"name":"meros","version":"1.0.0-beta.1","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(yml|md)\" --write","prepublishOnly":"yarn build","pretest":"yarn typecheck","test":"uvu -r ts-node/register tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","polka":"0.5.2","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","tslib":"^2.0.3","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.1.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast utility for reading streamed multipart/mixed responses.\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however there have\nbeen some types left out as we aim to be on the consuming side, than the server\nside (but we do support Node clients).\n\n-   `content-type` is assumed to stay consistent between parts, and therefore\n    the \"fall through\" approach is recommended and to only be given at the\n    start. Ie only give it `content-type` as a header once, and only for the\n    first chunk.\n\nPlease note;\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\nSo be sure to calculate a boundary that can be guaranteed to never exist in the\nbody.\n\n-   We do not support the `/alternative` , `/digest` _or_ `/parallel` subtype at\n    this time.\n-   We also do not support\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_ ~ function meros\\<T=unknown\\>(response: Response): Promise\\<Response | AsyncGenerator\\<T\\>\\>;\n\n### _Node_ ~ function meros\\<T=unknown\\>(response: IncomingMessage): Promise\\<IncomingMessage | AsyncGenerator\\<T\\>\\>;\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is a multipart, then it will resolve with the response\n> argument.\n\n## üí® Benchmark\n\n> Ran with Node v15.1.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 8,021 ops/sec ¬±0.91% (75 runs sampled)\n  it-multipart              x 6,265 ops/sec ¬±1.54% (78 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 14,535 ops/sec ¬±2.10% (75 runs sampled)\n  fetch-multipart-graphql   x 8,646 ops/sec ¬±1.34% (77 runs sampled)\n```\n\n<details>\n<summary>Reference patch set</summary>\n\n```\ncontent-type: \"multipart/mixed; boundary=abc123\"\n```\n\n```\npreamble\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"hello\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"other\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"another\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 39\n\n{\"massive\":{\"nested\":{\"world\":\"okay\"}}}\n\n--abc123\nContent-Type: text/plain\nContent-Length: 22\n\n\"should be plain text\"\n\n--abc123--\nepilogue\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"shouldnt\":\"work\"}\n```\n\n</details>\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"0baf47f46255ee190a0cd898204314754a594a99","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.1","_nodeVersion":"15.1.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-zXwUNFj7I5jKpH00y9gbyA1DSwBZ4qs2mK3mHD7ew7NgjASgMGd+dyaDVgSg2W3Kt8k+ugjJVMdTsFDeHIdp6A==","shasum":"b14bdf84bbee97953af61a893e5be229db1a1f93","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.1.tgz","fileCount":13,"unpackedSize":25089,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfqjkHCRA9TVsSAnZWagAAhAgQAJBI1BWtOBFRZ9ksUB3g\nDNsq0TrYTRQHSHrdZ4sk7AhIoN3oO7Q8v+HBHpZQv5aUXAxNVYRy7GNmuKl5\nV593YPlYWm4oEB45bfaTrdnaGfSvplITHuJABpcZiN/0PBf38iCRXZWMtn+d\nH1+u1aQaKk+WeSuzEFk38iZyVJAHx0Xyw/uAYA9d0UHLOxNgM3dTb39LKZqU\nOcwPHahwvteSSnqyhrkryoITysRYrmoZ4iNjz23BBD3iWgzcfNasV/HErgUE\nVjpK0qtnY6tCyJqjit1RAwRP7pfgdT9Pxc14EzY6iYwI1V8vWx32RFJ4d2hU\nGQMTdmr1v3rAaJjC3jEkHDrCGOZQKo/ONrmBLim1tbDEEgsUQRhNN5B6A/HB\nv1lCSPlsOSUUUcBzccIs8UT0qvhARplESX44RvEYAUYP1IPb2WeByuxNi0X9\nxDvHwata8uO1mZw2fll1UVpFT0FUXMvNV4+xk9EXttxqLv1rU4QOsYlDG1X8\nRECsNB0ojvyB8bCEztCN9PX7M0Yapq3dCd2Gi+iHeLoSmB3nviqqP+CQm5+v\nVltLcckAM2+EvUlm6SWxpz/dNouEWuD1FosvnT1FgHpp/qBrOn0w+EYjUFoR\nCQgngaqCwTpn3VMc+dShL9hm2FGY6InlanS5NOBBBva//4I4/AC4CtBsTyg0\n6f6s\r\n=5+cH\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC1eqcYbdZ+3R2PULayi709JFxq7HO/+FNIE5Dn2gesxAIhAKTfQbhEIcvf39xJOMcQWzHwBzgn++PVBmRgJ3HibUtU"}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.1_1604991239312_0.40705210661216196"},"_hasShrinkwrap":false},"1.0.0-beta.2":{"name":"meros","version":"1.0.0-beta.2","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"types/index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(yml|md)\" --write","prepublishOnly":"yarn build","pretest":"yarn typecheck","test":"uvu -r ts-node/register tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","polka":"0.5.2","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","tslib":"^2.0.3","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.1.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast utility for reading streamed multipart/mixed responses.\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however there have\nbeen some types left out as we aim to be on the consuming side, than the server\nside (but we do support Node clients).\n\n-   `content-type` is assumed to stay consistent between parts, and therefore\n    the \"fall through\" approach is recommended and to only be given at the\n    start. Ie only give it `content-type` as a header once, and only for the\n    first chunk.\n\nPlease note;\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\nSo be sure to calculate a boundary that can be guaranteed to never exist in the\nbody.\n\n-   We do not support the `/alternative` , `/digest` _or_ `/parallel` subtype at\n    this time.\n-   We also do not support\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_ ~ function meros\\<T=unknown\\>(response: Response): Promise\\<Response | AsyncGenerator\\<T\\>\\>;\n\n### _Node_ ~ function meros\\<T=unknown\\>(response: IncomingMessage): Promise\\<IncomingMessage | AsyncGenerator\\<T\\>\\>;\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is a multipart, then it will resolve with the response\n> argument.\n\n## üí® Benchmark\n\n> Ran with Node v15.1.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 8,021 ops/sec ¬±0.91% (75 runs sampled)\n  it-multipart              x 6,265 ops/sec ¬±1.54% (78 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 14,535 ops/sec ¬±2.10% (75 runs sampled)\n  fetch-multipart-graphql   x 8,646 ops/sec ¬±1.34% (77 runs sampled)\n```\n\n<details>\n<summary>Reference patch set</summary>\n\n```\ncontent-type: \"multipart/mixed; boundary=abc123\"\n```\n\n```\npreamble\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"hello\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"other\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"another\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 39\n\n{\"massive\":{\"nested\":{\"world\":\"okay\"}}}\n\n--abc123\nContent-Type: text/plain\nContent-Length: 22\n\n\"should be plain text\"\n\n--abc123--\nepilogue\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"shouldnt\":\"work\"}\n```\n\n</details>\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"624c3fe881ee01ed23ab443430ef13584c47b9ce","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.2","_nodeVersion":"15.1.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-obyZlPwFW3KUjJFY5BCtppWGt2CS9JBCddd7vGR1LtZpSglNxjZBX1Yc53NR508OI2FSjrC3TmbkE+m9jBcl4Q==","shasum":"f160faa1d1b03a5f0c2da9c03b97d4b37528a59b","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.2.tgz","fileCount":13,"unpackedSize":25095,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfqj1GCRA9TVsSAnZWagAALHIP/1jTZvVLeSaNsWLepSXx\n5GA0Lc5St253Q0wC12cUlS02eDpEs7mQKTKg1IHKKROefZXj8g69spsLTQmM\nxNeDRh/BKM1EpfG6uu2c31kYUnoX2w8UODXE2dBBcYKCnxv1vpgs4U6tMJKD\nipimFuAVivHvx4bZIITwu3jEtlb3K/uYJuALPn1MC2CDlypZG51Es3+A7Pso\n2qMZrBpWQxDB4DUWYWia4jh9Xe7SlThFXgmRc1Is1qsvvBODJ8WJpcotDZop\nataHg3yxQRrpA/iS7HAORNwJ/b8+xgWcrLPgzhOqkgBIapI3/S/oW5l1ty68\n6mUObQlobEUpRkwvT/kJgNQD6Lhw8iKZE7bEK9tqbLAUSFBtuQq2jSiL3+4p\ntU0O7rxIEUaGw+mH5OwYbk0emAFNmtgUoy2mgFaou9wQLpGEzRin9bkqY3Dv\nAkFXUxp5HQ+i0umJMx+DXnpGx3nZpiTuW6jQNtBUQjYvxTO3SuRper2pyi71\nEw4TZ32dgbSZ7nM4JiVRyy59KWn2WK674P263e9U84Zf3QQglI03I4r7l8MH\nNp9zFRVDWQZaWWwZqQnL9eD4vNpNVQgsyeqpfYq/wD8dUcvTU8h1oSW7gDIL\nG45OmL97CW8G+AWsYUSDQO9AfrannSdK2LstQqdoaUg0vcinypncl2xA9b1O\n3grr\r\n=jFbD\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCgQMkYWkodNquyrSu+yLbLaa9VCw9zgCl/fpB+JP2KnAIga845A2cIunBVlMzJgYBquMPnofDpCCZX49/vXVTJ4RY="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.2_1604992326081_0.24502797291115952"},"_hasShrinkwrap":false},"1.0.0-beta.3":{"name":"meros","version":"1.0.0-beta.3","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"types/index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(yml|md)\" --write","prepublishOnly":"yarn build","pretest":"yarn typecheck","test":"uvu -r ts-node/register tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","polka":"0.5.2","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","tslib":"^2.0.3","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.1.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast utility for reading streamed multipart/mixed responses.\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however there have\nbeen some types left out as we aim to be on the consuming side, than the server\nside (but we do support Node clients).\n\n-   `content-type` is assumed to stay consistent between parts, and therefore\n    the \"fall through\" approach is recommended and to only be given at the\n    start. Ie only give it `content-type` as a header once, and only for the\n    first chunk.\n\nPlease note;\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\nSo be sure to calculate a boundary that can be guaranteed to never exist in the\nbody.\n\n-   We do not support the `/alternative` , `/digest` _or_ `/parallel` subtype at\n    this time.\n-   We also do not support\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_ ~ function meros\\<T=unknown\\>(response: Response): Promise\\<Response | AsyncGenerator\\<T\\>\\>;\n\n### _Node_ ~ function meros\\<T=unknown\\>(response: IncomingMessage): Promise\\<IncomingMessage | AsyncGenerator\\<T\\>\\>;\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is a multipart, then it will resolve with the response\n> argument.\n\n## üí® Benchmark\n\n> Ran with Node v15.1.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 7,892 ops/sec ¬±0.92% (72 runs sampled)\n  it-multipart              x 6,161 ops/sec ¬±1.77% (76 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 13,641 ops/sec ¬±2.42% (74 runs sampled)\n  fetch-multipart-graphql   x 8,406 ops/sec ¬±1.88% (74 runs sampled)\n```\n\n<details>\n<summary>Reference patch set</summary>\n\n```\ncontent-type: \"multipart/mixed; boundary=abc123\"\n```\n\n```\npreamble\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"hello\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"other\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"another\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 39\n\n{\"massive\":{\"nested\":{\"world\":\"okay\"}}}\n\n--abc123\nContent-Type: text/plain\nContent-Length: 22\n\n\"should be plain text\"\n\n--abc123--\nepilogue\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"shouldnt\":\"work\"}\n```\n\n</details>\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"763ac7185a198f7891b433dbba55943d6d01a353","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.3","_nodeVersion":"15.1.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-36BERRTAzOG/4gatRxWbioUS5nkz8/ELSmn56AElh0f8/aRUgK5Zdgwu8TdFYU/6was2FdlkyYgOo9ujWlw4yw==","shasum":"1994718772c97e1c800c2b22c991aec4c59d1246","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.3.tgz","fileCount":13,"unpackedSize":25180,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfqj8vCRA9TVsSAnZWagAAHLQP/ROv4qj8AZknfVdiJfPj\nV3trgqdxUTPYp8vNgn0U54XtA4V8dnwkhkLllygSHG7cGbuUd8OvFgjBgvDy\nEPJRSPyuTbwroPImR+8jyNY+9dokfXWstSyz9EQUQ9zRoQL6G0RJAUgq9bLP\nM2TB+BsfdMH+61oJwFT18WEdDU51DCc1swn6srw6/8xYicjaa826GHeJMeOA\nNcH6AqqZqaTHYw4PyCXi15ADhc+KZ8Fxrhw27jiTrTAIcuI5WwJ5Z0MwIrPM\nGJgan+vHfpeWeKFY+ko3NSwjOz5SJKvMbKKokIRdXm3tnI00P+T+OfNy8+9b\nR8Cbhexf8f3tVzfmTy3QqZ+H0QOzoCTx8YUkFdGG1emLCxLvNO/5CCwHf6ZQ\n3KpviUayAXthOO0oHn3EauSL2hqPgoqwYiO5z1kuDpzF9Xedzma8sLp470B2\nZ//hrytlX2RWHk3+IGlGn9mIR5B6dndRc4+THLvooxN2dapDAQa6+Vc68uDJ\nWXKIaofR+AUNJmBRCQpuYx1I92chiiiGCDOX0sBDNG3kAnr3PQvypPcS1UC5\nDloKLYfl2JtsNkIVog8RxYmhdtcimumxbn0T6LjRJJYjPptNsY2epaxjtl//\nTPcYmprSfPKf5LLK+Rt3RayXqlwg6enb8VqA15W+PAjkR0TeDYcGEOr5blQR\nXYij\r\n=iWt2\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAswTXcjPfJ2t3jCxV/MFJMSh6sdGPv2JK+AD8qEgNSSAiAXCbeSkZ3y3HiGgU+gOWNzSvbZdbMr/XEaLc8T0Kac8A=="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.3_1604992815431_0.19949449767877558"},"_hasShrinkwrap":false},"1.0.0-beta.4":{"name":"meros","version":"1.0.0-beta.4","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"types/index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(yml|md)\" --write","prepublishOnly":"yarn build","test":"uvu -r ts-node/register tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","polka":"0.5.2","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","tslib":"^2.0.3","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.1.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast (761B) utility for reading streamed multipart/mixed responses.\n\n## ‚ö° Features\n\n-   ‚úÖ No dependencies\n-   ‚úÖ Super [performant](#-benchmark)\n-   ‚úÖ Supports _any_<sup>1</sup> `content-type`\n-   ‚úÖ Supports _fall through_<sup>2</sup> `content-type`'s\n-   ‚úÖ Supports `content-length`<sup>3</sup>\n-   ‚úÖ _preamble_ and _epilogue_ don't yield\n-   ‚úÖ Browser-Compatible\n-   ‚úÖ Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n### _Caveats_\n\n-   No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n    time.\n-   No support for\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = unknown>(\n\tresponse: Response,\n): Promise<Response | AsyncGenerator<T>>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = unknown>(\n\tresponse: IncomingMessage,\n): Promise<IncomingMessage | AsyncGenerator<T>>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is a multipart, then it will resolve with the response\n> argument.\n\n## üí® Benchmark\n\n> Ran with Node v15.1.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 32,900 ops/sec ¬±0.89% (78 runs sampled)\n  it-multipart              x 16,033 ops/sec ¬±0.98% (77 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 28,226 ops/sec ¬±1.20% (80 runs sampled)\n  fetch-multipart-graphql   x 14,835 ops/sec ¬±0.90% (78 runs sampled)\n```\n\n<details>\n<summary><i>Reference patch set</i></summary>\n\n```\ncontent-type: \"multipart/mixed; boundary=abc123\"\n```\n\n```\npreamble\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"hello\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"other\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"another\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 39\n\n{\"massive\":{\"nested\":{\"world\":\"okay\"}}}\n\n--abc123--\nepilogue\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"shouldnt\":\"work\"}\n```\n\n</details>\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.</small>\n>\n> 2: Unlike the spec assuming `application/octet-stream` for untyped chunks, we\n> assume whatever `content-type` we last encountered. See\n> [RFC1341 Section 4](https://tools.ietf.org/html/rfc1341#section-4)\n>\n> 3: If not given, everything from the body through boundary will yield\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"69a62a6dc98e08866b6a34c258c309c452efb245","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.4","_nodeVersion":"15.1.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-ZhDq0s+T3KmU67pVscv1ubKYJVGsA6klgClAIQg67mMEL/gYrklsXc7my2/KSvk7msJNn6lT2IwrLbP8nQRCfQ==","shasum":"b8013710591f0b2b7073de746fa28c34512e162e","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.4.tgz","fileCount":13,"unpackedSize":27095,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfq1A2CRA9TVsSAnZWagAAUOkP/09Z79afENhQ/o70tCdh\nu50u95mOQJHUALCBjBrpocKN33duUQ5DWsrFN1ERTYtb0GRwiItIkeJB1HRS\nWui/+ZU0dIuHFxmW5Qpv6bQsuZVRrr2p4iiiaFJMmTylaiqXplf+y/AQQ+4d\nh0aMoknWzGNFK1ITsWeuRuNyCAdcIpTbRM8xvyI1/pq04k/psgQdV6Z5ziiA\nq9R+QFlGrQJfgUkdtVYDKD2z64a8EPiONCofL8lZY1QjrhpADLcXzQH9YniA\noeHaTg6OOmHof/I0swDuQxut/0LXsfifqfcaDKna/MyFVSpxYq6kJWKqMA9+\np9+YnxNB5mVsqofvCnVY2nv/riuP/o8EBLdeg9KAHP50o0kqFBb13zXVF5+l\nuWsSbvsAfSQVMEiPtFozeJU1ASJO1wIMGZhKTu0krBqu9NrVFJmm+kACOf/G\nrBFDRpgYXO9suDOeaU88edidD2oLHRtySJLi0GlJjtQo6curwuljue2mB0+6\ncj5/+bhBsCCS6Iey3ysIOz2N0INtEOMKZgdc2mWXylrueK7B52JaxxSqmeWE\nRggYMQJoJa75WPTHAPGT4cHzqsQK0K7jfY8Am2RZftjla1ttw+Q4Ohwejr/Q\naIuaZ+FD6Z/G3/LlkVvM1s9D/ii8rFpsXdhxoWeYyrGmjSTd3FAFoEapyacR\nKvpU\r\n=8AoZ\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCLyR3EcN9l7QsEzZAhFaa6wC4zyg9IKACrygizwg8aDAIgfNYl61BCQ5Lk/dW/xcBAXkC5H5yUFZGbhgVyBbTl7tQ="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.4_1605062709639_0.8473383488536019"},"_hasShrinkwrap":false},"1.0.0-beta.5":{"name":"meros","version":"1.0.0-beta.5","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"types/index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(json|yml|md)\" --write","prepublishOnly":"yarn build","test":"uvu -r ts-node/register tests"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.2.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast (761B) utility for reading streamed multipart/mixed responses.\n\n## ‚ö° Features\n\n-   ‚úÖ No dependencies\n-   ‚úÖ Super [performant](#-benchmark)\n-   ‚úÖ Supports _any_<sup>1</sup> `content-type`\n-   ‚úÖ Supports _fall through_<sup>2</sup> `content-type`'s\n-   ‚úÖ Supports `content-length`<sup>3</sup>\n-   ‚úÖ _preamble_ and _epilogue_ don't yield\n-   ‚úÖ Browser-Compatible\n-   ‚úÖ Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n### _Caveats_\n\n-   No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n    time.\n-   No support for\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = unknown>(\n\tresponse: Response,\n): Promise<Response | AsyncGenerator<T>>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = unknown>(\n\tresponse: IncomingMessage,\n): Promise<IncomingMessage | AsyncGenerator<T>>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is a multipart, then it will resolve with the response\n> argument.\n\n## üí® Benchmark\n\n> Ran with Node v15.1.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 32,900 ops/sec ¬±0.89% (78 runs sampled)\n  it-multipart              x 16,033 ops/sec ¬±0.98% (77 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 28,226 ops/sec ¬±1.20% (80 runs sampled)\n  fetch-multipart-graphql   x 14,835 ops/sec ¬±0.90% (78 runs sampled)\n```\n\n<details>\n<summary><i>Reference patch set</i></summary>\n\n```\ncontent-type: \"multipart/mixed; boundary=abc123\"\n```\n\n```\npreamble\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"hello\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"other\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"another\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 39\n\n{\"massive\":{\"nested\":{\"world\":\"okay\"}}}\n\n--abc123--\nepilogue\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"shouldnt\":\"work\"}\n```\n\n</details>\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.</small>\n>\n> 2: Unlike the spec assuming `application/octet-stream` for untyped chunks, we\n> assume whatever `content-type` we last encountered. See\n> [RFC1341 Section 4](https://tools.ietf.org/html/rfc1341#section-4)\n>\n> 3: If not given, everything from the body through boundary will yield\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"9b3aac4c6919c074950e1b2b35cce15d95f83f08","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.5","_nodeVersion":"15.2.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-fkyjsAcUVdOJyUFNB0RO+CVb6S91M5vo6Kocnb6h2pwdNL7R8q7i6Vy7JdQTUP28qHGrfSRc9SHn7wklNGfZlQ==","shasum":"af99f53d44ec9de0e177140b8369a6309dc37aa3","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.5.tgz","fileCount":13,"unpackedSize":27163,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfrS3vCRA9TVsSAnZWagAAnHwQAJkyR5/QJuJWfpx7kOT4\n4ldQxHvM62uDDt9cwuQPG6l1uY/6O2CS3PAo+9i4pyJfc/qfjXgUi+vvAHhF\nYoQF3PvdmhIHLobw+F2FVy66YpkqmtSwjSsTcSn0KXdjl0XVh25ytxjPekd+\nkSRJ3lP4naj5V1jZjBFkH0l6EVGcM9dhX0glXVitXgL8gN5N7p7clD663iah\nALYiSt6KIqz/B/pv3kuHDaVqZO+ar4REFAdgt6IdNPr3krD4qC7ASeSm2ucL\nVyFwpWmiM25TNNuKcd2E3d0o9zxmWub2QH3hlbnb385I7VF0Aakh/5uyGokL\nAHIoDd3Uol+Qcra+nWBwpYsUbNanAZb2IZsygV1lPB1BGfRyxkhKuLBeBYQT\nCczjAolQurCY29snsyY++r9JghlpiHobIeEPhtLQfvFLnI4sr28jQaxzhWrz\nUyWu8baZEF9QwmBKWmggaeHCyTCzNcmVkDid66zvJK2yrtlxQQh8UG0q2Qq+\nM048RsnUZ3LXD0y+hAL2LKCG2zx9cNfb6ZV1XyBom6u2iZWWmrinAJcnU8tb\nabGhAEuE6SoThoQc7Lwh2e93AeXrg1XghxtwNsaAtGhw2af8lyooVL0czeKq\nJwT7a7VBoX+LsaXGDTF7Z7S0gH/1Fn7WXekemqpW++aP8KnjizYUgHZgCTUh\ntOVT\r\n=/Pct\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDJXZXaVXCKC1KR4meSWaQRas6qHS4q/b3bXKyxkUo6MQIgVd4x2D8a+8XsvBQbqxRKX/hUqwzxwuMDP0vSul/jkB4="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.5_1605185007266_0.011696526023897036"},"_hasShrinkwrap":false},"1.0.0-beta.6":{"name":"meros","version":"1.0.0-beta.6","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(json|yml|md)\" --write","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -i mocks test"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.2.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast (761B) utility for reading streamed multipart/mixed responses.\n\n## ‚ö° Features\n\n-   ‚úÖ No dependencies\n-   ‚úÖ Super [performant](#-benchmark)\n-   ‚úÖ Supports _any_<sup>1</sup> `content-type`\n-   ‚úÖ Supports _fall through_<sup>2</sup> `content-type`'s\n-   ‚úÖ Supports `content-length`<sup>3</sup>\n-   ‚úÖ _preamble_ and _epilogue_ don't yield\n-   ‚úÖ Browser-Compatible\n-   ‚úÖ Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n### _Caveats_\n\n-   No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n    time.\n-   No support for\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = unknown>(\n\tresponse: Response,\n): Promise<Response | AsyncGenerator<T>>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = unknown>(\n\tresponse: IncomingMessage,\n): Promise<IncomingMessage | AsyncGenerator<T>>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument.\n\n<details>\n<summary>Example on how to handle this case</summary>\n\n```ts\nimport { meros } from 'meros';\n\nconst response = await fetch('/fetch-multipart'); // Assume this returns json\nconst parts = await meros(response);\n\nif (parts[Symbol.asyncIterator] < 'u') {\n\tfor await (const part of parts) {\n\t\t// Do something with this part\n\t}\n} else {\n\tconst data = await parts.json();\n}\n```\n\n</details>\n\n## üí® Benchmark\n\n> Ran with Node v15.1.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 32,900 ops/sec ¬±0.89% (78 runs sampled)\n  it-multipart              x 16,033 ops/sec ¬±0.98% (77 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 28,226 ops/sec ¬±1.20% (80 runs sampled)\n  fetch-multipart-graphql   x 14,835 ops/sec ¬±0.90% (78 runs sampled)\n```\n\n<details>\n<summary><i>Reference patch set</i></summary>\n\n```\ncontent-type: \"multipart/mixed; boundary=abc123\"\n```\n\n```\npreamble\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"hello\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 17\n\n{\"other\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"another\":\"world\"}\n\n--abc123\nContent-Type: application/json\nContent-Length: 39\n\n{\"massive\":{\"nested\":{\"world\":\"okay\"}}}\n\n--abc123--\nepilogue\n--abc123\nContent-Type: application/json\nContent-Length: 19\n\n{\"shouldnt\":\"work\"}\n```\n\n</details>\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.</small>\n>\n> 2: Unlike the spec assuming `application/octet-stream` for untyped chunks, we\n> assume whatever `content-type` we last encountered. See\n> [RFC1341 Section 4](https://tools.ietf.org/html/rfc1341#section-4)\n>\n> 3: If not given, everything from the body through boundary will yield\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"6a8d2afd5cad88c265ff3c2737fe25806ee4388f","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.6","_nodeVersion":"15.2.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-TGKymVAKuRFOV0NehAvj+8K+WQAw4qjldgwi39DAPW15rjWDnQKxU6L4NydQTb6AKb2pGzbqqXwkQf1qjDDNTw==","shasum":"5fe1dd62552c79f136f10dc96eac4c08ad9c450e","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.6.tgz","fileCount":13,"unpackedSize":26303,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfrw4qCRA9TVsSAnZWagAABfAP/jwS5LuGi04jY61sMd52\nwd6fCR+G6Sl8gIfWanGVjqdi3hUU0ohNarcNJGWUiIlyTAquygT7kzYxRi/7\n9zlGPoPqdK0BgsEYysRKXHt1YVWCJKsLFHXSk50dSh9hSZ/qxn235VmOVJF5\nsjqQ4bzUZInNAr/NKVYGe1wFngnOT+ybubEqEnQFqb65YdKf8lMMTrFfChfk\npDIDPcnDzjXDfAJsI5rBktUy47xDt62Q00ggwhWtUGHTeC2An1L3NKrXmDOj\nQtu9TanMDvgezmhz6KqOs22Aakna28Vq735geE1vLBaFwsOMHjjioB2RBgmi\nhMrBzNJ6Co5/xJmmSyuemAWjbQXs4fqiMzaH4MfY4IPhatVJo78uGGu9ysid\n92pDwk5Fc4FvDIUQuIf5++jkkVu4HHZG/7L9JrpB4sttIz7s2x0JxosdIukI\nj4daRGT4IU9JL3lXokyzgYmgW2NbFeZl9ydFpdyLOHlMuBPWnYncxMIBONwZ\nKR3gLQ3psP/q2me4IjLcmm541QOvpll4Gfnd3suEvzPBHDY2WVb6NZJE5kSL\nb35wkK8e97qNlDvmiWcdC1/+zLoPNCG9EHJQA6vr87WSyqp4S2UGVi4euhMr\nkMJ/SShjCVXSB13/E/Fy1tLXLt5vDUv9964hfncvFSi9qox2av3xwAZXn2pq\nopWq\r\n=SYFY\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAU1nX2Lof8cgdm4mrnnVK73jCvI1zJHQnWO/uc2sdzWAiEAi2uCz4y2DF7f2XBDCex1AZ+4Rj7vFtTJL+ATmKf/tnk="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.6_1605307946220_0.33661673724996644"},"_hasShrinkwrap":false},"1.0.0-beta.7":{"name":"meros","version":"1.0.0-beta.7","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"index.d.ts","typesVersions":{"*":{"*":["./types/*"]}},"scripts":{"bench":"node -r ts-node/register bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier \"{*,.github/**/*}.+(json|yml|md)\" --write","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -i mocks test"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.2.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast (761B) utility for reading streamed multipart/mixed responses.\n\n## ‚ö° Features\n\n-   No dependencies\n-   Super [performant](#-benchmark)\n-   Supports _any_<sup>1</sup> `content-type`\n-   Supports `content-length`<sup>2</sup>\n-   _preamble_ and _epilogue_ don't yield\n-   Browser-Compatible\n-   Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n\t// Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n\ttap((part) => {\n\t\t// Do something with it\n\t}),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n\tconst request = http.get(`http://my-domain/mock-ep`, (response) => {\n\t\tresolve(response);\n\t});\n\trequest.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n### _Caveats_\n\n-   No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n    time.\n-   No support for\n    [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = object>(\n\tresponse: Response,\n): Promise<\n\t| Response\n\t| AsyncGenerator<\n\t\t\t| { json: true; headers: Record<string, string>; body: T }\n\t\t\t| { json: false; headers: Record<string, string>; body: string }\n\t  >\n>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = object>(\n\tresponse: IncomingMessage,\n): Promise<\n\t| IncomingMessage\n\t| AsyncGenerator<\n\t\t\t| { json: true; headers: Record<string, string>; body: T }\n\t\t\t| { json: false; headers: Record<string, string>; body: Buffer }\n\t  >\n>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument.\n\n<details>\n<summary>Example on how to handle this case</summary>\n\n```ts\nimport { meros } from 'meros';\n\nconst response = await fetch('/fetch-multipart'); // Assume this returns json\nconst parts = await meros(response);\n\nif (parts[Symbol.asyncIterator] < 'u') {\n\tfor await (const part of parts) {\n\t\t// Do something with this part\n\t}\n} else {\n\tconst data = await parts.json();\n}\n```\n\n</details>\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 27,045 ops/sec ¬±0.94% (81 runs sampled)\n  it-multipart              x 14,840 ops/sec ¬±0.93% (81 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 29,548 ops/sec ¬±0.56% (76 runs sampled)\n  fetch-multipart-graphql   x 13,613 ops/sec ¬±0.54% (78 runs sampled)\n```\n\n> Ran with Node v15.1.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.</small>\n>\n> 2: If not given, everything from the body through boundary will yield\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"b08eb7c0a79d4152e30596d62e5080c6561ac01f","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.7","_nodeVersion":"15.2.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-5iRlhVIj6bfFamljJMecZYuM+BTQqZvNONpBFjYqks3dj7O+7aLgDULKmqtH4kS6Tp22pjZ9qY63s5jrn247LA==","shasum":"f504799db624dc68150d3c2dbe509fad02246013","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.7.tgz","fileCount":13,"unpackedSize":27634,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfryeuCRA9TVsSAnZWagAAXLAQAI2WgLNhaVH9di5l4P36\nHTQ1VdnY1Rrhmm3ajYjqKLpSJ+FrhAh/D8kccKQ5yUOgnoXZDTlfhWYarkel\nwKwvlqSBy4vkg0HQv36r+RRqmVzqOv6cfG9ioWU7YxM4NHjRs7Ff+n6JGCPy\nqh0Ypua8N1i/L7bT6oLdThKynJdojNI7SlCS7c6pJLcf1Q0DS6FlzwjOVxlo\n/bZTndmNP+30k8HErTRCEI+MZb2KitpQroOldOU6sn/KWkDK7lZoQRCuhuaN\n5M6TMut3UFOOc8NrgCyZFE5KBrng/B5zdoT7e0gJgAqjv8KW81M8WJPw4S2E\nAO2jTaWbJ6FpgyNiWviXtoeZbN1sY5waCzVj3odVTEgvvFtt9vIrOwcVV1P3\npmGCwRtAiOwjWbaghihqh0DlpxAv+u/XZUMOxO4fn6Jy5/5PpCMzS+U2Clxj\nvuQyur4luGezX7UQenMm2SVt7HG82lg+/ALobs65E9roHceIq6b0CbfjUWhV\nTyPrrG1O0WP3MbNuD5UgrN0KOZTCv/0FHrEwtHvh+C2sUuB/Vhm4wqbK7OpC\n7vMvHRqjhXZeQ92nllJYH03rygOiPE0Rhqkw/HVtzRf2pKGWb1T9WZEamyW/\nbTFn4sc6aJ4sTRXwSlU554izN0Fw5t07mJy0XwdQia4q5t+0VS4gvLNhUdMw\nDfzV\r\n=HevD\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICQ9E6q+acnIe2FwoMVsrXzw783b1AEm7e/CJFFdfJ9QAiEA2EaBHqtmpN4i9EVLNMIqu77o1XTlIfiq9t3CzrW5ypo="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.7_1605314477701_0.2978349582346622"},"_hasShrinkwrap":false},"1.0.0-beta.8":{"name":"meros","version":"1.0.0-beta.8","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"useTabs":false,"tabWidth":2}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-dts":"^1.4.14","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.2.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast (761B) utility for reading streamed multipart/mixed responses.\n\n## ‚ö° Features\n\n- No dependencies\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- Supports `content-length`<sup>2</sup>\n- _preamble_ and _epilogue_ don't yield\n- Browser-Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://my-domain/mock-ep`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n  time.\n- No support for\n  [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = object>(\n  response: Response,\n): Promise<\n  | Response\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: string }\n    >\n>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = object>(\n  response: IncomingMessage,\n): Promise<\n  | IncomingMessage\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: Buffer }\n    >\n>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument. Or really any unhandled cases, we'll resolve with the\n> response.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/fetch-multipart'); // Assume this returns json\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 27,354 ops/sec ¬±0.83% (83 runs sampled)\n  it-multipart              x 14,956 ops/sec ¬±1.18% (78 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 30,077 ops/sec ¬±0.92% (80 runs sampled)\n  fetch-multipart-graphql   x 14,089 ops/sec ¬±0.65% (80 runs sampled)\n```\n\n> Ran with Node v15.1.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.</small>\n>\n> 2: If not given, everything from the body through boundary will yield\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"1c6391225256886988f3acb770baef56779e745a","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.8","_nodeVersion":"15.2.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-Q412DEQCCZDwGtud7/UbDRCbAcuDPZoIRgubZWdacJqSKv5N09Dff4nPp+Zp2+7kB0N3edXIfsCBx5eqXK3Xew==","shasum":"faea3f3be7c0a5220616ca62725be5b2c722af0b","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.8.tgz","fileCount":11,"unpackedSize":25903,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJftGdACRA9TVsSAnZWagAAh3cQAIjwzLPaDWehtC5ruk3M\nIzKfc6b4WU3qeuMnRb9rJTbGEexNUukzMv0rsx/pEtGnLGvZtnPKMj7H6k2B\nqtl94S/fqzoRU18KpJ9JcY7tQdiz62/gcr1pXtVSQNTx51zp50m/qUyiN/iZ\nS+bxLGpx91WZbsTZ5BZc/+4oSNhQLj+CrUe3Qrgb7NxFFIW3UVhZtIkB0AYp\nAUiRZr4ishOr2UJe7gaMDSCVMMhhJWP+t/ZJaFitx5huXCU8Id9nDtYPTBs8\nxjlLocBZ4z1T0cTHjBG1pQgaZ+bYlfQ9wiQVc4Ga3MpIurF4gyqeqH2ol8H8\nq0AZVshsWHkxBAEhzgDDWrkVQ36R3/IjKkvX3Ri/y3P2I3rJ2MgmGEM1Gf0d\n9WhUPJO9V5zYwFNGL/SDBIkbvd7Db1qSIKsRACScYRp4PDx0MaF97298qmFY\nlt9FTG6/jf5ld5ha1NynGI9FY7ud7tV6/Hc+dsZRCfaj/g2e2gEzlS+lQmCZ\nnrke2Sp1Mswqv5qmM4Xv21LLb4ytijO5/Ux4Q4zNf06FqPoFEnpW7qZE3Ufx\nm9gPeZjIsetV9mU/AoIZgttDq81a06vvHg8tV65sFSbzHSylq5+dA2noQ8+H\niF29ONEBoKYW3QhwJFGIC+wfOaJNDZTbVv9LAWKC3Fpx8clYvvvJQlHPDjW+\nnCYe\r\n=SOnA\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFaPCIK+xN98MaypjkGCzx79xHEOZ6wPL7Evtc4WCdwXAiEAjQGN4/QmhKdTKg3BG0vYqGVIISUKWR1pEPblqW6kjfk="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.8_1605658432109_0.42835780205970697"},"_hasShrinkwrap":false},"1.0.0-beta.9":{"name":"meros","version":"1.0.0-beta.9","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"}},"unpkg":"browser/index.min.js","browser":"browser/index.mjs","module":"node/index.mjs","main":"node/index.js","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","typecheck":"tsc --noEmit","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"useTabs":false,"tabWidth":2}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.7","benchmark":"2.1.4","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.1.2","rollup":"2.33.1","rollup-plugin-dts":"^1.4.14","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.0.5","uvu":"0.4.1"},"volta":{"node":"15.2.0","yarn":"1.22.5"},"readme":"# `meros` &middot; <small>From Ancient Greek ŒºŒ≠œÅŒøœÇ (m√©ros, \"part\").</small>\n\n[![CI](https://img.shields.io/github/workflow/status/maraisr/meros/CI/main)](https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main)\n[![codecov](https://img.shields.io/codecov/c/gh/maraisr/meros/main?token=dAoRt2GoQn)](https://codecov.io/gh/maraisr/meros)\n\n> A fast (761B) utility for reading streamed multipart/mixed responses.\n\n## ‚ö° Features\n\n- No dependencies\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- Supports `content-length`<sup>2</sup>\n- _preamble_ and _epilogue_ don't yield\n- Browser-Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://my-domain/mock-ep`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n  time.\n- No support for\n  [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = object>(\n  response: Response,\n): Promise<\n  | Response\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: string }\n    >\n>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = object>(\n  response: IncomingMessage,\n): Promise<\n  | IncomingMessage\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: Buffer }\n    >\n>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument. Or really any unhandled cases, we'll resolve with the\n> response.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/fetch-multipart'); // Assume this returns json\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 27,354 ops/sec ¬±0.83% (83 runs sampled)\n  it-multipart              x 14,956 ops/sec ¬±1.18% (78 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 30,077 ops/sec ¬±0.92% (80 runs sampled)\n  fetch-multipart-graphql   x 14,089 ops/sec ¬±0.65% (80 runs sampled)\n```\n\n> Ran with Node v15.1.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.</small>\n>\n> 2: If not given, everything from the body through boundary will yield\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"51d692a6bcb40e1d8216d1abe08ec75ca38c30b5","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.9","_nodeVersion":"15.2.0","_npmVersion":"7.0.8","dist":{"integrity":"sha512-2pFgpBmypV/Ym2p24k/vHtjE40FQMsUZVKY+7VKLb9/hZELRozEIk0GfKWobS10qKOG1JONHaVV2fAcjmPugBQ==","shasum":"5e7d6bdaf0ccd6eb6592aed86b159be71805ad00","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.9.tgz","fileCount":11,"unpackedSize":26501,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJftGf7CRA9TVsSAnZWagAA+pMP/3475ECD/aK5B/zhha+k\nHpNrO0TRvSbx70zacryo+X564WwF+ssuQanBrIy+N5IQ1ql5LYVvEEDJqzFD\n02EUUwIi8hYZMn6I7pplnJXhmy8u2xuhPfZcSysuXo7CchkIiujPb36hv4z1\nIxyJdjuNWgg+vNbH/ML7GQva1Oop3M6gAx+AzXjOEYY4K9ohtFmg0geuQWGq\n0m1nXcEaELQImDCXsBGhrTk/92Iu7sEzjsTBMePiteRphtDncy8TRLDLWj0+\n9FNyZkETl5jL5piU+1zAHiV6cyl54/BgRRg4bj8zgi94TK4DAmpN5SXKmI7U\nwcOXdRa39R5D0FeyCC/uUpXp94rTi+uQgTyDA8vbOX5BECH8G5jbuiI+B3Bh\n/ZcO+cx7Hptx+NdXgWPnnWFMdj88w3mn7F/cVakUe54d2WJdATeT7POQ4Cj4\nt2ohTYrXvPzwjIqkgtowNpVLE2HlJWrYciZh/SPsR9dHpYKzzFXAVdUvrNyd\nYV+CS+Jl5fxEecmPvq8JtUvWkNAKLnwvCabxsv1kOhfeq+pcsuU/ay4eQCuC\nJgyWDjxHhmmRezi6pvYZRCwTl1qXZx/roE6AbOuaDz6YcO8OYxRJb6CWjLdl\nsJVBhGv711McomzlLloPzkfVUMnwxslXsKai4vxPn0kZBJHYhH732FZ6JAAH\n8XO3\r\n=Ucym\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDMD0NUzlU/doCLPlYW554UT4+4w1yQ0NPpdlaHl8ML4QIhALbxtiknuliJ4RH3jhmY/MF2SEjNg/k7FeErQSNWBrvX"}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.9_1605658619100_0.5486168356271706"},"_hasShrinkwrap":false},"1.0.0-beta.10":{"name":"meros","version":"1.0.0-beta.10","description":"A fast utility for reading streamed multipart responses.","keywords":["multipart","multipart mixed","fetch","utility","reader"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"}},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","size":"bundlesize -f \"{node,browser}/*.js\"","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.9","benchmark":"2.1.4","bundlesize":"^0.18.0","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.2.0","rollup":"2.33.3","rollup-plugin-dts":"^1.4.14","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.1.2","uvu":"0.4.1"},"volta":{"node":"15.2.1","yarn":"1.22.5"},"readme":"<div align=\"center\">\n\t<h1 align=\"center\">meros</h1>\n\t<p align=\"center\"><code>yarn add meros</code> makes reading multipart responses simple</p>\n\t<hr />\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/workflows/CI/badge.svg?query=branch:main\"/>\n\t\t</a>\n\t\t<a href=\"https://npm.im/meros\">\n\t\t\t<img src=\"https://img.shields.io/npm/dm/meros\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser-Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://my-domain/mock-ep`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n- `meros` comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaing \"part\".\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n  time.\n- No support for\n  [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = object>(\n  response: Response,\n): Promise<\n  | Response\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: string }\n    >\n>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = object>(\n  response: IncomingMessage,\n): Promise<\n  | IncomingMessage\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: Buffer }\n    >\n>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument. Or really any unhandled cases, we'll resolve with the\n> response.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/fetch-multipart'); // Assume this returns json\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 27,354 ops/sec ¬±0.83% (83 runs sampled)\n  it-multipart              x 14,956 ops/sec ¬±1.18% (78 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 30,077 ops/sec ¬±0.92% (80 runs sampled)\n  fetch-multipart-graphql   x 14,089 ops/sec ¬±0.65% (80 runs sampled)\n```\n\n> Ran with Node v15.1.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"abcd8c11950876abfd9dff46d24298e4e82e34ce","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.10","_nodeVersion":"15.2.1","_npmVersion":"7.0.8","dist":{"integrity":"sha512-FPPvlvy008HVOq4ATI1sYf+GoZ9zA0FlrSyYXCNJEJxHUB07P7SEwZwckM2ncsQogIcXgnZhnRWGfZR6faZ0LQ==","shasum":"f95f36d28c528ff9920ae7b15b9b6a74b5b4f803","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.10.tgz","fileCount":11,"unpackedSize":26542,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfutlTCRA9TVsSAnZWagAAO2MP/A4eZDX6YxKyBc1vk8WA\np7hzU0GiIJqdzmW65C7ubbXIvheXGsv+A/8ncOTs80fKOyYtUx8d+pnALnFZ\nQFJb+5MXHNfhmsQjRqvS2M08bZlUS1/KHeSSXH6SYSOeEOAxnd633KKzb+FR\nvO73XaUZc4WVmE89/L8sCUnEUeoDl0OUbgpxHLxc6lxZAb9iaTLFZjfQt9It\nLkLN8jZOQMHOfc7C6lTEyZGD+6iFe3QEFlDwNrjvlFoL3m3PrPLAx/PRSF3M\nCW6O45Va7C8y7QYd53Jr7NBdlWvdkGTGLUQxs7ZannGanM3SW/6++Z4GBv4x\nTxjFJ8rikSr7/iThq9b7ZLHgUe+e0qwtAU5TNKSF5OGIkkkxBRAtJpK9QakN\nCKSoJZ1aGIt5YaHFtN3LbKcHm9K5CT6evy11kWpq4N13pF8z1N6OxNbTVkRQ\nR/VT2ZjO6oePKihKl52gcpthlqCWF0deDp3E74ns6VzSk++1NCn48fb67uwk\n3oYdLwbjdAP4IA4UCPCMVy2Asork9JCiARFtt2Nvfrat8YEHe6bT5137t8LI\naqhjcw1qxU0ZyzWllwhjgbl+vPHj4F88PUiK9U9w0FwhKMdgLwf7gNbyGsZv\niBJYCpJrm4IM0tgMfC9neJuqE0GnOlpzb5AHVd8S10Y2lHVcovfLfYE6afjT\nsQYR\r\n=1yTU\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIDvvFwivFPNLBu3xbw7pibGBLEgemBM+jTkaB8AA+U1YAiAR6zRjbrfWZAMPYsza3WR1z9P+ScWhBjp6dzukMRw1fw=="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.10_1606080850511_0.512414874742396"},"_hasShrinkwrap":false},"1.0.0-beta.11":{"name":"meros","version":"1.0.0-beta.11","description":"A fast 699B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"}},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","size":"bundlesize -f \"{node,browser}/*.js\"","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"10.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.9","benchmark":"2.1.4","bundlesize":"^0.18.0","fetch-multipart-graphql":"2.2.0","it-multipart":"1.0.5","prettier":"2.2.0","rollup":"2.33.3","rollup-plugin-dts":"^1.4.14","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.0.0","typescript":"4.1.2","uvu":"0.4.1"},"volta":{"node":"15.2.1","yarn":"1.22.5"},"readme":"<div align=\"center\">\n\t<h1 align=\"center\">meros</h1>\n\t<p align=\"center\"><code>yarn add meros</code> makes reading multipart responses simple</p>\n\t<hr />\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/workflows/CI/badge.svg?query=branch:main\"/>\n\t\t</a>\n\t\t<a href=\"https://npm.im/meros\">\n\t\t\t<img src=\"https://img.shields.io/npm/dm/meros\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser-Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://my-domain/mock-ep`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n- `meros` comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaing \"part\".\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n  time.\n- No support for\n  [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = object>(\n  response: Response,\n): Promise<\n  | Response\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: string }\n    >\n>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = object>(\n  response: IncomingMessage,\n): Promise<\n  | IncomingMessage\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: Buffer }\n    >\n>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument. Or really any unhandled cases, we'll resolve with the\n> response.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/fetch-multipart'); // Assume this returns json\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 27,354 ops/sec ¬±0.83% (83 runs sampled)\n  it-multipart              x 14,956 ops/sec ¬±1.18% (78 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 30,077 ops/sec ¬±0.92% (80 runs sampled)\n  fetch-multipart-graphql   x 14,089 ops/sec ¬±0.65% (80 runs sampled)\n```\n\n> Ran with Node v15.1.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"57c5090cc656458269225bdcef09734d99eac958","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0-beta.11","_nodeVersion":"15.2.1","_npmVersion":"7.0.8","dist":{"integrity":"sha512-PJDfQzEK0UvV7hGy6cZrIDB9jyzo2EObZVGSUmshXyiJ0t/RSr/5N7Dib+vlyP22ANXHMkejqTb4/yz7Onj9kw==","shasum":"fe53aaf86ca41510791d348e77a73af8031ff95d","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0-beta.11.tgz","fileCount":11,"unpackedSize":26610,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfu3zkCRA9TVsSAnZWagAAZNkP/2/V5y61+cSBgVGJ+/hx\nTHMmfSqM6qFN5n9xxCGWsG0XQKTEGTZll5z65VkluII1vQYGnHlSIvGDps0U\n/H/0Kql+PiGu4hL5MnfMnNk6V2aBdpFclOdhKd2ZnEOCqjSrKT06sIcvAuWP\nGw7oAfMQfyAAhAuQwIDMXVNhTBhejZYGH5AXIMBQ40k/ish+XBAAH1+rskGA\n6mJrkPwfAd54gO1CJT/UYm/GE5iMzrvVqTZsqx9P7pvoK7KgdKC938ox0vey\nA2C365SnPXUtiEz9FLsyrpcTJ0cB1X7IJdDdsLBOVTDKAwT6JWQ7IrlaE1kq\n06yq5c1cPK9niaV/fwK/mqAGAMq6UhK0AZ3nU8sgcKyUvq3Hdmp5sNKUGVl7\nH0pmF9NGzd4Ez0KN0xffm0C7u/74QK+BNCutsbnCSg/AwTttJhk9rS/zg+2v\nhqu8J2QKSgUfO+BIdmWSe4vbaXOgmA/6u6+DTn4qwpHarBFP3bQVSn1Ph3TH\nimnC2HQkLFFaSOjxde3XZuuQ2WQ1XZMcgXFiUmMw1VVIOiORjC6ZBa0uMkLr\nmIy8DyM29eP2Xvys/c0jWbXxa9KAQMkl3vTDgvxy413EFRICLJWSSLsKnXfj\nZuT/7f4lpnYo705nrHeKQbabtTZMx4NRdDEIm6gvmMsQPI/rO+WDh0lS5k+J\nzx43\r\n=bNMV\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFQf6rVUdtjNCUl3dL41Qpay2BL9aM2UJMF7aaszObVUAiEA+ErGKkRojIaa5aa1QrwQT4dXz0zJlWaRgNfNSdU8wCk="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0-beta.11_1606122723570_0.4573811676915691"},"_hasShrinkwrap":false},"1.0.0":{"name":"meros","version":"1.0.0","description":"A fast 699B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","size":"bundlesize -f \"{node,browser}/*.js\"","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"11.0.0","@types/benchmark":"2.1.0","@types/node":"14.14.12","benchmark":"2.1.4","bundlesize":"^0.18.0","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.5","prettier":"2.2.1","rollup":"2.34.2","rollup-plugin-dts":"^2.0.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.1.1","typescript":"4.1.2","uvu":"0.5.1"},"volta":{"node":"15.2.1","yarn":"1.22.5"},"gitHead":"f5030e58a3935abfc2a12149148cc6446bb506b5","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.0.0","_nodeVersion":"15.2.1","_npmVersion":"7.0.8","dist":{"integrity":"sha512-gGhudbEI/7Z/5Mc3Mh2VsxWTm0byUB7O34azwchvvDRZ3oaxt5RaN80tF9mwN+plfi2JKDeIQQfJJWwuWmgqBQ==","shasum":"cb1fc818a60afc56bd86c577a9758b4510b3f027","tarball":"https://registry.npmjs.org/meros/-/meros-1.0.0.tgz","fileCount":11,"unpackedSize":26610,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgD7l/CRA9TVsSAnZWagAAdHEP/0rCk2QL52uMI48oC/Cc\n42s0FCgVlo+kPpqL9YNszJwC9vGW9xXq8HG3NdvyGm/Uq/zeeCWe2CzZCxAG\n6dnyCGtsT/b8jdmirxWAkpJy6yzVjSPBI6V3+QnUvRwPgujR1F6ExLESk0yS\nrU5duGpfEQAnGsuPoTLP9oeBFmwnyNyNzXFxx43ze2ObIC8oitod/EmqVK7g\n9ih/PiPd0/2nLfmse1clwVSjm6rJBtZfgxwAUX95Uw6UB/1kCKQTQwWvPkcR\nWqNPPYxZ252O+hPVe/GyCI9TPDLaLmo7eFtS9R4vn9t5jJbh7f0R7NM0G04t\nwaY52KjfOWlOwXuTvHcULOROXbVVuBYqljFEftM8MsRNdLqlDUH/sLZTxhem\nG3wB3h0TkNKYaO/JCk2Ooh+MgrE/SbFQ2QEMEg05MVelEpV1aX6hdfF5pq+r\nA1qJ3feF78sGuMUtM95Woc1WKkCb9zwovfISz1/SeKNsfxhKzZQSAM/eowJk\nRqKsYKB3b6xx+s7iseRUB0/PS1D9wP/vxyuauiM2E1YzCZAJ9Y05nfwzsJx+\nsH1RGb++zEENUYeNT+5dv9iI1hCCwAdMvfMeGHz/oL7KONZUnQqCYPNEE41S\ne3OoYgAWjrLFQTB70rZKBzUSeJvj7Gsdh4CMc3Ar7djoAFY9J+d6aPp7iKth\n3aXw\r\n=CEYr\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIDHIiF9oVMjfnOO3ap58MaPjZKA6a35T8dMVDyiJPS8ZAiAxFB+xWkZxtbQxDik0VwuJJR9hlsQ42GhTPRmAhbKmTg=="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.0.0_1611643262300_0.20623880680508777"},"_hasShrinkwrap":false},"1.1.0-beta.1":{"name":"meros","version":"1.1.0-beta.1","description":"A fast 699B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"11.1.1","@types/benchmark":"2.1.0","@types/node":"14.14.22","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.6","prettier":"2.2.1","rollup":"2.38.4","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.1.1","typescript":"4.1.3","uvu":"0.5.1"},"volta":{"node":"15.8.0","yarn":"1.22.5"},"readme":"<div align=\"center\">\n\t<h1 align=\"center\">meros</h1>\n\t<p align=\"center\"><code>yarn add meros</code> makes reading multipart responses simple</p>\n\t<hr />\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/workflows/CI/badge.svg?query=branch:main\"/>\n\t\t</a>\n\t\t<a href=\"https://npm.im/meros\">\n\t\t\t<img src=\"https://img.shields.io/npm/dm/meros\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser-Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/fetch-multipart').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://my-domain/mock-ep`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n- `meros` comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n  time.\n- No support for\n  [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\n### _Browser_\n\n```ts\nfunction meros<T = object>(\n  response: Response,\n): Promise<\n  | Response\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: string }\n    >\n>;\n```\n\n### _Node_\n\n```ts\nfunction meros<T = object>(\n  response: IncomingMessage,\n): Promise<\n  | IncomingMessage\n  | AsyncGenerator<\n      | { json: true; headers: Record<string, string>; body: T }\n      | { json: false; headers: Record<string, string>; body: Buffer }\n    >\n>;\n```\n\nReturns an async generator that yields on every part. Worth noting that if\nmultiple parts are present in one chunk, each part will yield independently.\n\n> If the `content-type` is **NOT** a multipart, then it will resolve with the\n> response argument. Or really any unhandled cases, we'll resolve with the\n> response.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/fetch-multipart'); // Assume this returns json\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 27,567 ops/sec ¬±2.04% (77 runs sampled)\n  it-multipart              x 16,064 ops/sec ¬±1.20% (79 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 30,077 ops/sec ¬±0.92% (80 runs sampled)\n  fetch-multipart-graphql   x 25,551 ops/sec ¬±1.44% (81 runs sampled)\n```\n\n> Ran with Node v15.1.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"9c10b245e11bd2262f159b93dd21ff0545491097","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.0-beta.1","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-FWjhhoTUecbFjhSYbiHuIe4EErBlwHScf1fYrKj8Lnk9l1Y2nwCObo1vHZk20arwtnhdR27d9y913bFgGfO11Q==","shasum":"13168bd1db61f67ca1a44b0fe6f255c4e07aa239","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.0-beta.1.tgz","fileCount":11,"unpackedSize":29155,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgGeQNCRA9TVsSAnZWagAACeIP/j96QiQKkUY83pkQPB7F\nSBnRIi4qItDWggmMr+mbxbRghpksOdXRKOhw7Xl7/b5Yw4IrvYgCngIcz38Z\nrl4+iALcVt2Y0UA+gR+W+SF+LSmOrnQTA1kyZROpFoqYuubn8GxBrT2//RtG\n03cGdFME5YeJNWmViVxYWCqXi0oh+EYQ4T8hFJBAEUiXedY4xDpup7mnA7jq\nK7IU2qKKXYiPWgO3gtDHYA/tehbhkf5R1wgy7VU6rsrvCwEyF08NDK7NI1i0\nfD+74IdCQxpNbQI+awR1o4/Uw/ZpJVW5ZnyEgGxmHklYKN6KDHRJR+FE6aWQ\nynd6/6Mvsgxc1cKXfP59F8rvsz1C9NhXxWTYhq2xeRf+c/Y4bMe08dLoTauk\ncmgJOKjEus5GqSac+szyOXfCU4su88h4wQVd1dZhEYXUfgufWu9MziAHxZ0W\nWFNrH4AYBt0DS/icY5vgPP9iTzCLI7xwumoLq/PSLpvEEhDhCO69EKXSIDoa\ncrq5j1Xju8IUCfUymBugxFMma8X9gdUJSp4GGg24n0ZbzB9YB9QzXtadTnIK\nZQ//sCQvDxupi307wksyfLCCrqii8MNLh2XIa1kOBjTYe94JyJhDFQ7F0zVg\nzYd80XsqPIddJGmRPAg6X4p8ZEYtUB+iouv4MH3+KO9bqqMrdJimM3njM6o+\n+xW+\r\n=A8gs\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCiggwq1qfpYykVd8CFk/JuoIZUSaP1/xlZ4DZ3QFiSPQIhAP171tJXlhoAEuNZQd6G/IjjoSXj+wPnxEdulr1U99DF"}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.0-beta.1_1612309517317_0.000029534171831491207"},"_hasShrinkwrap":false},"1.1.0-beta.2":{"name":"meros","version":"1.1.0-beta.2","description":"A fast 633B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@rollup/plugin-node-resolve":"11.1.1","@types/benchmark":"2.1.0","@types/node":"14.14.22","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.6","prettier":"2.2.1","rollup":"2.38.4","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.1.1","typescript":"4.1.3","uvu":"0.5.1"},"volta":{"node":"15.8.0","yarn":"1.22.5"},"readme":"<div align=\"center\">\n\t<h1 align=\"center\">meros</h1>\n\t<p align=\"center\"><code>yarn add meros</code> makes reading multipart responses simple</p>\n\t<hr />\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions?query=workflow:CI+branch:main\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/workflows/CI/badge.svg?query=branch:main\"/>\n\t\t</a>\n\t\t<a href=\"https://npm.im/meros\">\n\t\t\t<img src=\"https://img.shields.io/npm/dm/meros\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser-Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## ‚öôÔ∏è Install\n\n```sh\nyarn add meros\n```\n\n## üöÄ Usage\n\n```ts\n// Rely on bundler/environment dection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n```ts\n// Browser\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// Node\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://my-domain/mock-ep`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üéí Notes\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't\nthere yet. That being said, you may very well use this library in other\nscenarios like streaming in file form uploads.\n\nPlease note; be sure to define a boundary that can be guaranteed to never\ncollide with things from the body:\n\n> _Because encapsulation boundaries must not appear in the body parts being\n> encapsulated, a user agent must exercise care to choose a unique boundary._\n>\n> <small>~ [RFC1341] 7.2.1</small>\n\n- `meros` comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this\n  time.\n- No support for\n  [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## üîé API\n\nMeros offers two flavours, both for the browser and for node; but their api's\nare fundamentally the same.\n\n> **Note:** The type `Response` is used loosely here and simply alludes to\n> Node's `IncomingMessage` or the browser's `Response` type.\n\n### `meros(response: Response, options?: Options)`\n\nReturns: `Promise<Response | AsyncGenerator<Part | Part[]>`\n\nMeros returns a promise that will resolve to an `AsyncGenerator` if the response\nis of `multipart/mixed` mime, or simply returns the `Response` if something\nelse; helpful for middlewares. The idea here being that you run meros as a chain\noff fetch.\n\n```ts\nfetch('/api').then(meros);\n```\n\n> If the `content-type` is **NOT** a multipart, then meros will resolve with the\n> response argument.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/api'); // Assume this returns json\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\neach `Part` gives you access to:\n\n- `json: boolean` ~ Tells you the `body` would be a JavaScript object of your\n  defined generic `T`.\n- `headers: object` ~ A key-value pair of all headers discovered from this part.\n- `body: T | Fallback` ~ Is the _body_ of the part, either as a JavaScript\n  object (noted by `json`) _or_ the base type of the environment\n  (`Buffer | string`, for Node and Browser respectively).\n\n#### `options.multiple: boolean`\n\nDefault: `false`\n\nSetting this to `true` will yield once for all available parts of a chunk,\nrather than yielding once per part. This is an optimization technique for\ntechnologies like GraphQL where rather than commit the payload to the store, to\nbe added-to in the next process-tick we can simply do that synchronously.\n\n> **Important:** This will alter the behaviour and yield arrays‚Äîthan yield\n> payloads.\n\n```ts\nconst chunks = await fetch('/api').then((response) =>\n  meros(response, { multiple: true }),\n);\n\n// As a simple Async Generator\nfor await (const parts of chunks) {\n  for (const part of parts) {\n    // Do something with this part, maybe aggregate?\n  }\n}\n```\n\n## üí® Benchmark\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 28,232 ops/sec ¬±0.91% (77 runs sampled)\n  it-multipart              x 16,909 ops/sec ¬±0.55% (79 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 29,291 ops/sec ¬±0.50% (76 runs sampled)\n  fetch-multipart-graphql   x 27,804 ops/sec ¬±0.55% (82 runs sampled)\n```\n\n> Ran with Node v15.8.0\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance\nguidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give\n> you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"a87ef6917ce939fc1de65281354d20f442733059","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.0-beta.2","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-XimPTn4kehyFVEPTyPpyiXGM+VD5QO8y5yAvnEl74Pn4xaOt1O243zBkWJps/xkxyIyRLBBRN/rPGXNOoKd8IQ==","shasum":"5a23f20689234527b4dded3178792b5c9ca571e5","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.0-beta.2.tgz","fileCount":11,"unpackedSize":30700,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgGmRJCRA9TVsSAnZWagAACAkP/jWKcw5OgC1MSQoz7lO2\na/UJXSKYgAf/P656d8DdgKB324DLveAk9vIbr5ARfF2Ufb00Hc/AEv6b8619\nIyOmMz4TEt16s1GJwWezjq2Fr2Ulv6fBPN4TwZzkEEMDQtqUDdZc/Q9FWWSY\nCYCsENSu+Nh+ZqO5ZKtMUBjWSp3FPpiX6mlZcMIOHb7TvL1xYt0EYlrnmU3D\n3wZak9kKX+7eobMGRUMu2hNW9zKtWEGwqUqsFEKmjmmvRQRIDbUFyG5nHqwB\nqJY/O34asFgpzz1jKPK8rAyGqtckNXB1Pxkq4+24KK6iQcXzQD7QP3g2Onj7\nUeo1gGKSK/XGLj8EgrBvetN++OQOsm7uj8DJ9P7eyOs/sky6HsWy2ygw/Bvv\nVdT1Rv7TyXKifVs2oJzyNPtCXq4fIe8d/gJl0hdnzQeMBzL3gLy9++Jkc63p\nTOLXSDmrq2oad7291f5Mh13SG9AgcMYugl4UHRkVrL9VI6PN/cl/R+GyN3hc\n/Emhr5dFySjtUXOOw08gCEdEMH44nQTIPA7U6XjkOlu+lgeG/oocM3LDQ3gt\n4egzTOlCWnOMHE9rRDLiuHFs9qON56/l8+24SX4zQCqU+w8LgAkT8txs70BR\n84kQ6cjM78nizK2ico7EAgy09zOJrpmOCXiOQJdd/m04NUeWOwPHXuH521JX\nTHYX\r\n=Jxew\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDXShwARSCa+hZDTzdlgo8sfwmYtN0DQgQzphgz0/QQ4gIhAJTVbUIzQreMBHRGlOuMyh431XBobYqt5au0tOjUY0Km"}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.0-beta.2_1612342345403_0.5831655694728015"},"_hasShrinkwrap":false},"1.1.0":{"name":"meros","version":"1.1.0","description":"A fast 610B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(ts|json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@n1ru4l/push-pull-async-iterable-iterator":"2.0.1","@rollup/plugin-node-resolve":"11.1.1","@types/benchmark":"2.1.0","@types/node":"14.14.25","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.6","prettier":"2.2.1","rollup":"2.38.5","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.1.1","typescript":"4.1.3","uvu":"0.5.1"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"15.8.0","yarn":"1.22.10"},"gitHead":"e630fa80673365106317a7941f51ba13624d8a74","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.0","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-qqzVFmXy3ZY1AZXopswkyIamPwi0mYabw5p034dcpPwkjAtdgZ4pc3QgbYuQjCu14kOa6QhG11drG6mIQaNvXg==","shasum":"478ddeb49612ba872445beb11fcbbba7d2991bdb","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.0.tgz","fileCount":11,"unpackedSize":29486,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgIiyCCRA9TVsSAnZWagAAboMP/1w76ZP61uOewdfPZ5u5\nZfWEt0cQk6VQLpbX4LpZZxL2FGiI1JqxiDYybHZK4kl40cmdl0tljBcloKxf\nEIx6AnTkhCIkXGMGTHFt1aFkVfPUemOooC9zeu96TTj/Yr84XXZ5c56cGRmC\nBiuEhkJYJsED+71zzufWGuYNvW5IfVhxnyiVDIBG5Fpl/82vUEzPJoTDzRB9\ngx9w9S+E1ieDp/Q7lH5hqB0O6+0JZqONWgQYdrLaYroJJFz47rzCy7jsaZbK\nzbF73XHzlyJjN22jfqcqDE8UBlxMGyyS/DwJ/Yn2V+qLCgOKq9njDm6w1I/B\nlFqQ8NB2a+8IC1aB1vSGRpI4jwyomFg3FWa7M1SN3Y4AflUzkRegj0ymj7ti\nR3RsS5J8X1z4w/TkPsYkcOtELTXbYIz6HShZzZc0beyoZOrtNyaBQqVXjsNh\nf4bdkSl4sdbomQocNQqK5ir3Kh1pZDmmKmuRx7qgoA6zLbkJ7t2oThbxENYH\nBNDrL2FHMs0Uq8YBgIgyLDQFBwPUKiE7AD6drQldQ0QZCd3utfRw2rjr/DDh\n5z30RZlXf+BfT3lQWXRk/c7Rdjvyd9u/j3Qwoc8A23QSfctQKZw41RcN2Qst\njuX8YgQhOaRWvqd+KnpKmzdJgWK57Utnyt3KyJ4nenBxPfdpNq7fMbj0rnON\n37/d\r\n=4vk5\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCS5KtvqaHjXF5IpLTI+OG7Ro2Sl26kB0P+s5yT/eULTAIgTepj82pyE3oGnglstgLWjJ05BwMMf0ziswHHZH2WBUo="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.0_1612852354347_0.7758543426338664"},"_hasShrinkwrap":false},"1.1.1":{"name":"meros","version":"1.1.1","description":"A fast 610B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(ts|json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@n1ru4l/push-pull-async-iterable-iterator":"2.0.1","@rollup/plugin-node-resolve":"11.1.1","@types/benchmark":"2.1.0","@types/node":"14.14.25","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.6","prettier":"2.2.1","rollup":"2.38.5","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.1.1","typescript":"4.1.3","uvu":"0.5.1"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"15.8.0","yarn":"1.22.10"},"gitHead":"a3b062141b89b2da778ba59e347cc575af1d5cff","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.1","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-Kqga0zqLEYQJSscx+04xq7kX8WLaWng6U+vAGR5R/DQUJktm171SxiD3tEUEjLK36dh5yFkk0clE/+JiBQ8OoQ==","shasum":"5d5a0412dea99d84c1dff0c4001f038c46298660","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.1.tgz","fileCount":11,"unpackedSize":29313,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgIk6fCRA9TVsSAnZWagAAVgwP/1tUas8I1ngEv6h2JPOL\nqHloF6baaEbIMcSRO3+J21gv/MyjBkg4uGS9AFpu3u0drNQdtJdTDZICY++q\ne0i7LrSMZSooy40CIuTnuMvnkxFd7ZGPe2HnR5IJRFjZXseFzIuEoJFId6MU\nlNwVSIqq5XgjHL5ngo1wRSs7ceJbdMvxeqDCOFV8G4p2ht19zW5HpUheDcUO\ni041nky7GEqpg4HKqm6ZV1cAj4Yg12c2m9FfFXZVTjkFUMaLhNw1zCgw/g1q\nxQXfr4bdphOWOpdbasIOv8+LFka/k4ZiRattchiqtbspsXXk+Dqe7lk1w/1n\n75eMeU0zdsK+f/WEpApoopASFJZMPKROYvJbEm1ZIA8RoLNPGsHq1HXL5buV\nCDO0VsR0oWe/NT78WS9pNTOz1s8+MtXYaO1jxEK8klc6aEswT00P4UbjH3pR\n/1261vToTqJJ9pS3AumpreKUyo7l921KbldKVlNl9SGwaLp9FTU9ZMrZPne+\n0JiBqpu+T+r2A23KjzWpxfiXIx0TjNhVwgWajUJMEiD3r8rv0xoPHd1dQLB8\nLZcHc3SQOZeNC9WWnWAc6ejAS4hh301WxgadFMfM7168GX02EP6L7inG+p6M\niYy0fXyitL7VNqgyfadA4AoQ2OTO0teEbJXyimhAWlU5C8QhC8FWGYn0DeQ3\nT7gV\r\n=rgjV\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAGGiJIRVCsC/WwwLs3WhaeHRGe2N1Rv+OV3AJniJkgxAiAEGrtwwaBZTToadON8NM1nNB8sye7jOTKZlo0KFfW7wg=="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.1_1612861086711_0.41118946332570694"},"_hasShrinkwrap":false},"1.1.2":{"name":"meros","version":"1.1.2","description":"A fast 610B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(ts|json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@n1ru4l/push-pull-async-iterable-iterator":"2.0.1","@rollup/plugin-node-resolve":"11.1.1","@types/benchmark":"2.1.0","@types/node":"14.14.25","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.6","prettier":"2.2.1","rollup":"2.38.5","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.29.0","ts-node":"9.1.1","typescript":"4.1.3","uvu":"0.5.1"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"15.8.0","yarn":"1.22.10"},"gitHead":"cf7625d675e86cc200e274914ada1438d182f851","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.2","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-BvOjEcEtGBOSts+lCCuqDe4LhSvzwQsQNxDB86ZY8RiAVQsPcmzxqm1/OjBBWv7vCufEEq8jstf4QJBBAHlDXg==","shasum":"12d5f520458ba8ae1536092824c1744fa09cf79d","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.2.tgz","fileCount":11,"unpackedSize":29313,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgIk+ICRA9TVsSAnZWagAAwzAP/jGdMr99DQWUUgx0G4YG\nKbJfie9yVIlg3zikSQR2gjSXHvnhgqwJe8e5//H2/CRXEDSMg0A+cM8CuzDf\n+1lWEhEsZrklaN9h1sWd2tjLxWC7y2xxU4tvEU0M0FptGbX2cGmkCLu2IU/0\n5XVQg055N/LXRLP15ZfmyAjmwred9Eig7Vnhe3zesUm3P31fGkxtJZSksr3E\nDRkNScUj8MnmFH8Tt21GbsVUu9iUf2pL9Rb50Q6VaGIfmPDDh3PJFCvFAufx\nYb0I/KlH67p1S/Kq9tPwEahO+pxK1wk/NyEadQG/WdURRmKWmYl3y3A8btGq\n7W51kQuitI3hvgjuAtcQd5GsWI0EdivKG9QNipxLfM3sSd+uDZTAZFqiHf+i\n05ImD4yztftaNFxfwuo+bhuzJoL96L0kGVGxvC9WOTGkiL2sRQuFjjtgpDl7\n9QE7WZ5O+06yFnnd2XfbbMtqXYEG5O4GT4a+ntE/INbRk+8sMP24vCGCrblp\nbPr/MeqmwYsQuJaplFXA8sKP1poIEEXGSELwVWQqgNM5RXwfLOu+0/ZP4WXd\n7kdFJlbaWu+PscLrBkJacyLJmgWDj6iPh1JUD5JLP8aMLvGXBi7Mv87NcRuL\n7JvQwSN24PgwC9VmJb5FAJ2HpJOWURhCwroAIySovjoR/C2ou1moK5q5PrpT\n1LsM\r\n=C0Xt\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCNHxr/lGPOmfoyDtugbRzc0DxGw9eBbg2to+Thl0x4VgIgZMqF+GzTSApB/oQscyI3efzTpYzd3fg3Z50WF8gRriQ="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.2_1612861320424_0.37849490605691294"},"_hasShrinkwrap":false},"1.1.3":{"name":"meros","version":"1.1.3","description":"A fast 610B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(ts|json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@n1ru4l/push-pull-async-iterable-iterator":"2.1.2","@rollup/plugin-node-resolve":"11.2.0","@types/benchmark":"2.1.0","@types/node":"14.14.31","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.7","prettier":"2.2.1","rollup":"2.39.0","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.30.0","ts-node":"9.1.1","typescript":"4.1.5","uvu":"0.5.1"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"15.8.0","yarn":"1.22.10"},"gitHead":"ce47c31195c2651af717b0d88f06f9b43fd5482b","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.3","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-nUNyb2EOvMlJPXblUNzcZZ6/bAmv8R013Pd4bGIf/zv5/u2FzyngxajxqIUVpfflca5TLJXkbFR401bgIlnH/g==","shasum":"9e4467927565393637158081cefaa10037862618","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.3.tgz","fileCount":11,"unpackedSize":29301,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgNCtYCRA9TVsSAnZWagAAyMYP/3hRE9WnR6enE5OrC0gv\nNbGZ314uzF1bIppkMgpjA+6GN6hHnk1SsABD575gVzDqrCnzNo75UBtjm1cg\nK+kibBhkk0SOlyu+/wwO/SizCJvfw4Pd88KJ5j0NR9dPqqCn1hBChJ+zgGPy\nrNuRLTqbqyK68bqNcn5q8zpl9gJR6szV3DVo1xV+GdNm/IihrRAXTaKN7BBU\nz40/0rassbfdlO8L7SG/BDLJOi9Jo5qougmS10viQsdeKWFZNrdr3T3FKVX7\nVEMvjHf+DNsHaKKtU5VUnbRHuFW8nIR5bbyOtepg/PAlagK0fXQj+iBUYCun\nWFdg8zHyi0njHlmpQ7TyEwHT5OmssfvuyH6JRrSP20kINtvHyzZuEHLn46KH\ndi/TzDaikhe+HP8QWYUj2tVaF4q5+d5pgHKeBqQ5Ag2SecvBtwb7ovTyUkq0\n+5MNlOEQcD8SyPN2lVyYMZ3i+HMzAkVmvVN8bqYCTlp+tDfpgaGcRtZUIN+f\nvvK/TK2hC5OR27b/s4e5KmgNBqqM1oJOIwtwoLYQ+7hRGICEMiYuW704Kd2y\nEDZf0GqFIxn8wtpRe85jIqSJIVeAqwuc+7nE1YFd2tUY5EjKN4DuOLDVAZiI\nRFb64DbtYJ6hdv/LtH2Wuv2YxWTR0iMCkotRy2GbxgpGBxYIvo0+ltAsAXf0\nshzr\r\n=TweA\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDy77sWHc1Sh34KY9Bq36bW4SbnEm7AYJk4koDTNd5rAAIgYULkvEjh7DFm2sWTs8y79zg+21Or5qoR/8ZqkWv1mtk="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.3_1614031704185_0.048530752022514"},"_hasShrinkwrap":false},"1.1.4":{"name":"meros","version":"1.1.4","description":"A fast 610B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r ts-node/register -r ./test/_polyfill.js bench/index.ts","build":"rollup -c","format":"prettier  --write --list-different \"{*,.github/**/*}.+(ts|json|yml|md)\"","prepublishOnly":"yarn build","test":"uvu -r ts-node/register -r ./test/_polyfill.js -i _polyfill -i mocks test","typecheck":"tsc --noEmit"},"prettier":{"bracketSpacing":true,"printWidth":80,"proseWrap":"always","singleQuote":true,"tabWidth":4,"trailingComma":"all","useTabs":true,"overrides":[{"files":["*.md"],"options":{"tabWidth":2,"useTabs":false}}]},"devDependencies":{"@marais/tsconfig":"0.0.1","@n1ru4l/push-pull-async-iterable-iterator":"2.1.2","@rollup/plugin-node-resolve":"11.2.0","@types/benchmark":"2.1.0","@types/node":"14.14.31","benchmark":"2.1.4","fetch-multipart-graphql":"3.0.0","it-multipart":"1.0.7","prettier":"2.2.1","rollup":"2.39.0","rollup-plugin-dts":"2.0.1","rollup-plugin-filesize":"9.1.0","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.30.0","ts-node":"9.1.1","typescript":"4.1.5","uvu":"0.5.1"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"15.8.0","yarn":"1.22.10"},"gitHead":"10006a1c3be5c5fa31811a183aca925db2261448","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.1.4","_nodeVersion":"15.8.0","_npmVersion":"7.5.1","dist":{"integrity":"sha512-E9ZXfK9iQfG9s73ars9qvvvbSIkJZF5yOo9j4tcwM5tN8mUKfj/EKN5PzOr3ZH0y5wL7dLAHw3RVEfpQV9Q7VQ==","shasum":"c17994d3133db8b23807f62bec7f0cb276cfd948","tarball":"https://registry.npmjs.org/meros/-/meros-1.1.4.tgz","fileCount":11,"unpackedSize":29070,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgNDC4CRA9TVsSAnZWagAAkrYP/30Wy4J69GWFffBFZRUL\n8pKriOn1z6CdQnxgQlCekWYlaRUk2RAkwyIf+OvK14SyXUySt2BqYMCjyedh\nJzbAre77d5U/SDe6zL6ja5kE+XRPHQwh/UjLLHTgi1TmZMU3MHoEkogefmJv\njXv0c2WEpr2UypRtJ0UR4y8AWsX4Ka6iXL4sCG7Ft3tw8caxihb1vZmmXFcC\nyXUEw6YObM6VKa1+maoUDsCqt2FFXKs9s2l/g7kyxRyyp6MNt33OUX7ubTz6\niizH0M2xC7/JnfQe1g/5C1wFt5SGvpje5ZMCxU7tYaaD7Eg6ika1PgjIEIDG\nzmEAHcgsRZNuWsU63nUL0rE9pO8S4HgUojeZx7fCDQML+Xzx+j3A0kp6UdoI\noe2mWAn/Qm7TMliQdQ2BgRSoidQXUkt7QciHFVftBxNfX03YYAT68BLFkxTK\n9UtM8WfHOrnDSIh7o8Dk7+GdXvhxNX8pJO8jABZGiR+mG/0+wVuuGeyUvT0j\nxiExWmTFEtVpx3B6lPEBOrv4SRb/6wQ33kH8Bo8ZpLtXWOkLlapqPpOoeyoW\nGoriXv2IpE9RFO1TsMTqj0QAL2JGWgkgtEdqhivPGSWWT0PdHpSz89kenbbD\nnVE4r1x5cNeqqzcKyyje2pvxO+juLvGlNHJSyFpfVB0h0HhTXcv4F/lUr8mU\nqSss\r\n=KFhs\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAsbBbpb2CFCIfp9UJbZH3FD6cYIg6AqElxq6/lw4QYZAiEA3xYkmAT0wgrrLCYSsubqwiVFTPgwStB8YgvatvxXsXc="}]},"_npmUser":{"name":"marais","email":"me@maraisr.com"},"directories":{},"maintainers":[{"name":"marais","email":"me@maraisr.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.1.4_1614033080068_0.674666659725943"},"_hasShrinkwrap":false},"1.2.0-next.1":{"name":"meros","version":"1.2.0-next.1","description":"A fast 575B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r tsm -r ./test/_polyfill.ts bench/index.ts","build":"rollup -c","format":"prettier --write --list-different \"{*,examples/*/**,.github/**/*}.+(ts|tsx|json|yml|md)\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts","typecheck":"tsc --noEmit"},"devDependencies":{"@marais/tsconfig":"0.0.2","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@rollup/plugin-node-resolve":"13.1.1","@types/node":"16.11.11","prettier":"2.5.1","rollup":"2.61.1","rollup-plugin-dts":"4.0.1","rollup-plugin-filesize":"9.1.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.31.1","tslib":"2.3.1","tsm":"2.2.1","typescript":"4.5.4","uvu":"0.5.2"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"16.11.0"},"readme":"<img src=\"logo.svg\" alt=\"meros\">\n<br />\n<br />\n\n<div align=\"right\">\n\t<p><code>npm add meros</code> makes reading multipart responses simple</p>\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions/workflows/ci.yml\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/actions/workflows/ci.yml/badge.svg\"/>\n\t\t</a>\n\t\t<a href=\"https://npm-stat.com/charts.html?package=meros\">\n    \t\t<img src=\"https://badgen.net/npm/dw/meros?labelColor=black&color=black&cache=600\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros?labelColor=black&color=black\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n  <br />\n  <br />\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Seemless api\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser/Node Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## üöÄ Usage\n\n> Visit [/examples](/examples) for more info!\n\n```ts\n// Relies on bundler/environment detection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n#### _Browser_\n\n```ts\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/api').then(meros);\n```\n\n#### _Node_\n\n```ts\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://example.com/api`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üîé API\n\nMeros offers two flavours, both for the browser and for node; but their api's are fundamentally the same.\n\n> **Note:** The type `Response` is used loosely here and simply alludes to Node's `IncomingMessage` or the browser's\n> `Response` type.\n\n### `meros(response: Response, options?: Options)`\n\nReturns: `Promise<Response | AsyncGenerator<Part | Part[]>`\n\nMeros returns a promise that will resolve to an `AsyncGenerator` if the response is of `multipart/mixed` mime, or simply\nreturns the `Response` if something else; helpful for middlewares. The idea here being that you run meros as a chain off\nfetch.\n\n```ts\nfetch('/api').then(meros);\n```\n\n> If the `content-type` is **NOT** a multipart, then meros will resolve with the response argument.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/api'); // Assume this isnt multipart\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\neach `Part` gives you access to:\n\n- `json: boolean` ~ Tells you the `body` would be a JavaScript object of your defined generic `T`.\n- `headers: object` ~ A key-value pair of all headers discovered from this part.\n- `body: T | Fallback` ~ Is the _body_ of the part, either as a JavaScript object (noted by `json`) _or_ the base type\n  of the environment (`Buffer | string`, for Node and Browser respectively).\n\n#### `options.multiple: boolean`\n\nDefault: `false`\n\nSetting this to `true` will yield once for all available parts of a chunk, rather than yielding once per part. This is\nan optimization technique for technologies like GraphQL where rather than commit the payload to the store, to be\nadded-to in the next process-tick we can simply do that synchronously.\n\n> **Important:** This will alter the behaviour and yield arrays‚Äîthan yield payloads.\n\n```ts\nconst chunks = await fetch('/api').then((response) => meros(response, { multiple: true }));\n\n// As a simple Async Generator\nfor await (const parts of chunks) {\n  for (const part of parts) {\n    // Do something with this part, maybe aggregate?\n  }\n}\n```\n\n## üí® Benchmark\n\n> via the [`/bench`](/bench) directory with Node v16.11.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 262,515 ops/sec ¬±2.45% (77 runs sampled)\n  it-multipart              x 165,562 ops/sec ¬±0.99% (79 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 864,124 ops/sec ¬±0.77% (80 runs sampled)\n  fetch-multipart-graphql   x 283,296 ops/sec ¬±0.96% (82 runs sampled)\n```\n\n## üéí Notes\n\nWhy the name? _meros_ comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't there yet. That being said, you may very\nwell use this library in other scenarios like streaming in file form uploads.\n\nAnother goal here is to aide in being the defacto standard transport library to support\n[`@defer` and `@stream` GraphQL directives](https://foundation.graphql.org/news/2020/12/08/improving-latency-with-defer-and-stream-directives/)\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this time.\n- No support for [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance guidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"cf6f16118f5b418e191e653238ce628922f1025a","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.2.0-next.1","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-4HmtpQTR66S1BMsXYhu9D4CGBxYa9R8aUuE2ZUIDuW4pLmUbmzqbrKsctTAoyLa+bkrshiBJeDTbH4HQcjHJrw==","shasum":"84047db39e1fdb94acf7c8f17dd07928605f7849","tarball":"https://registry.npmjs.org/meros/-/meros-1.2.0-next.1.tgz","fileCount":11,"unpackedSize":28720,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhwxhfCRA9TVsSAnZWagAAmh4QAIWuZOkww/f/Etpm/6xM\n3cjlC331v+kMok5vURe81U6OXvolgoUu+7UsfVfikriXaYLE2jtn689k0/6n\nJsKiOhP0BlZDBvhwwDuRxym47JayTSpUexZWZ9d5SGG9fdrApSEdf/m6FNje\nUhhS8/PHmHjbEhNkqKdeyZw+r/JVZ0DLiF6QRLEyg+mZui/sDjIIIFtCWlID\nE4iaNgONKcICs43we0+XR8G7OLPCa46Dyo0X5I+SHlLiQExKrPBzKAMl+nDH\nX+wAgJ+nZeuzFK15/64UfPISGmWtGcAniIltZqJLc/pfJOlraV59DBYcg/sz\norfurHemn2KudZEW5sdxBEi5lbGnd8m2HJAXwJbpf5RXaacpz113DCtKU0IB\nfcoR3gDgXJGfSiPgVvnzJeSztoa42UX35a4JMSIfrUQIEOQmcDyTaXNZ6nyP\neg69FdyptUciH7VUh7YWesS4hNy7MD6prqz8nJEyJsTsgUoV7tpNzb9jIFZB\nV4L0ujUcskmHKIrymYBDMlVI020UnJmAGMeJdncPI+6+Op/w2kAPIJbjUut+\nW48mDkGLAyvd6tAaZRvlhFZhnqlJJS7PV3J6wq63MJU/Dmz/y8+JIlJfcl2K\nKjSAYw4QCn1bcl8j2gX3n4NoVEEJTJRfatbQM8EewpzJDCfTY7M5wzp4pdck\nSfbk\r\n=TdQs\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEio4b6sxMx+QswSGJjWWCLy7My7BMmYhq5FQnC7gIuTAiBrMAqlkG6tNrA/IrVtee+4ukTip/E5q6UbsPwPV8y6Zg=="}]},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.2.0-next.1_1640175710747_0.25558686255455787"},"_hasShrinkwrap":false},"1.2.0-next.2":{"name":"meros","version":"1.2.0-next.2","description":"A fast 610B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"import":"./node/index.mjs","browser":"./browser/index.mjs","require":"./node/index.js"},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r tsm -r ./test/_polyfill.ts bench/index.ts","build":"rollup -c","format":"prettier --write --list-different \"{*,examples/*/**,.github/**/*}.+(ts|tsx|json|yml|md)\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts","typecheck":"tsc --noEmit"},"devDependencies":{"@marais/tsconfig":"0.0.2","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@rollup/plugin-node-resolve":"13.1.1","@types/node":"16.11.11","prettier":"2.5.1","rollup":"2.61.1","rollup-plugin-dts":"4.0.1","rollup-plugin-filesize":"9.1.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.31.1","tslib":"2.3.1","tsm":"2.2.1","typescript":"4.5.4","uvu":"0.5.2"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"16.11.0"},"readme":"<img src=\"logo.svg\" alt=\"meros\">\n<br />\n<br />\n\n<div align=\"right\">\n\t<p><code>npm add meros</code> makes reading multipart responses simple</p>\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions/workflows/ci.yml\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/actions/workflows/ci.yml/badge.svg\"/>\n\t\t</a>\n\t\t<a href=\"https://npm-stat.com/charts.html?package=meros\">\n    \t\t<img src=\"https://badgen.net/npm/dw/meros?labelColor=black&color=black&cache=600\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros?labelColor=black&color=black\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n  <br />\n  <br />\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Seemless api\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser/Node Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## üöÄ Usage\n\n> Visit [/examples](/examples) for more info!\n\n```ts\n// Relies on bundler/environment detection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n#### _Browser_\n\n```ts\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/api').then(meros);\n```\n\n#### _Node_\n\n```ts\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://example.com/api`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üîé API\n\nMeros offers two flavours, both for the browser and for node; but their api's are fundamentally the same.\n\n> **Note:** The type `Response` is used loosely here and simply alludes to Node's `IncomingMessage` or the browser's\n> `Response` type.\n\n### `meros(response: Response, options?: Options)`\n\nReturns: `Promise<Response | AsyncGenerator<Part | Part[]>`\n\nMeros returns a promise that will resolve to an `AsyncGenerator` if the response is of `multipart/mixed` mime, or simply\nreturns the `Response` if something else; helpful for middlewares. The idea here being that you run meros as a chain off\nfetch.\n\n```ts\nfetch('/api').then(meros);\n```\n\n> If the `content-type` is **NOT** a multipart, then meros will resolve with the response argument.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/api'); // Assume this isnt multipart\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\neach `Part` gives you access to:\n\n- `json: boolean` ~ Tells you the `body` would be a JavaScript object of your defined generic `T`.\n- `headers: object` ~ A key-value pair of all headers discovered from this part.\n- `body: T | Fallback` ~ Is the _body_ of the part, either as a JavaScript object (noted by `json`) _or_ the base type\n  of the environment (`Buffer | string`, for Node and Browser respectively).\n\n#### `options.multiple: boolean`\n\nDefault: `false`\n\nSetting this to `true` will yield once for all available parts of a chunk, rather than yielding once per part. This is\nan optimization technique for technologies like GraphQL where rather than commit the payload to the store, to be\nadded-to in the next process-tick we can simply do that synchronously.\n\n> **Important:** This will alter the behaviour and yield arrays‚Äîthan yield payloads.\n\n```ts\nconst chunks = await fetch('/api').then((response) => meros(response, { multiple: true }));\n\n// As a simple Async Generator\nfor await (const parts of chunks) {\n  for (const part of parts) {\n    // Do something with this part, maybe aggregate?\n  }\n}\n```\n\n## üí® Benchmark\n\n> via the [`/bench`](/bench) directory with Node v16.11.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 262,515 ops/sec ¬±2.45% (77 runs sampled)\n  it-multipart              x 165,562 ops/sec ¬±0.99% (79 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 864,124 ops/sec ¬±0.77% (80 runs sampled)\n  fetch-multipart-graphql   x 283,296 ops/sec ¬±0.96% (82 runs sampled)\n```\n\n## üéí Notes\n\nWhy the name? _meros_ comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't there yet. That being said, you may very\nwell use this library in other scenarios like streaming in file form uploads.\n\nAnother goal here is to aide in being the defacto standard transport library to support\n[`@defer` and `@stream` GraphQL directives](https://foundation.graphql.org/news/2020/12/08/improving-latency-with-defer-and-stream-directives/)\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this time.\n- No support for [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance guidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"f23afcecaec0d66d6a2169daf61afb9848b7c568","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.2.0-next.2","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-gROGNWrIAfyszuPk1aGh7hANm6rZAMtIjZnTx9cGej4JdwrJ6wo95bK2//y7bgoUd4vqeObDkHHivn+wM3Vl5g==","shasum":"98061e1c9adb421b0b5b49fcc69de7a268c94546","tarball":"https://registry.npmjs.org/meros/-/meros-1.2.0-next.2.tgz","fileCount":11,"unpackedSize":29295,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhwxlhCRA9TVsSAnZWagAA51wP+wSRO4TE5IT9Mrvem+lC\nejeS4sFdE5/A9ffuyEHJ1gBv41a679UDpcubLQUtFT5D9yPiP+maKHioHBL7\nChh5w3/78zeynbdbUplBafXzawvsjxo+EjBYmtsiYnAhtc94Uu7OIB6B8FSE\nsE/wnCEnuVgwu7Dup0dEpnv+wc32BZm9polQjtsiLiYy++16Eh8pf8tzj4Vr\nzENK3qwGkT3G2kmP9AQlCpG0E/aH0QsXKEj0U/AycNGGz3HoZ8vHeKs316LC\nrR2HyOpmL/cHG/pvxPkOB6eWaFAUWA77AcYdRS/b6OAn+Rw2Sf82iheqylpx\nCiaOwHvu1LIzofgXHv/gfaFshhNCIDp2gGlfgbZ+l9VOm8FizQbq0pBQ64W9\nr97xALcnbmWVcSYt8CuFuIY/U7HX5P09ykZUQAaK4liUjfGdMdCFox+ftlWt\n5Jg9AMKU0u1GSSP0AYVL8cAhKUmiOMxJVN3dfkQV/CCNe6aP0J4JF+ve6t6C\nWZa4/t9rJ7+Y+kK7km41Oa4EacaIyAPdkcAKd3f4r/BfI+KbcjQEe2PmdB1L\nlp3/rb7qF4Z1CUuttqkIk1ue7wIRBQS8kjEZcia5SLdwJ7eZCK6mymFgDKvD\nxGCm6j3AndASFPhPEQm/kgR5cbhdXB3FBwD8kjcg131/HQ2JDOE2eHJHyY9j\nSGBC\r\n=p1KD\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD0XSFzp586V5zxn0EjO3xzvaKFQXyPZbNa/KaJsXYTywIgRoqM6TCmbsjQJvGuiRl7NOkqA3Co8l1MAhXXMvAoZho="}]},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.2.0-next.2_1640175969542_0.6956435393365763"},"_hasShrinkwrap":false},"1.2.0-next.3":{"name":"meros","version":"1.2.0-next.3","description":"A fast 626B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"node":{"import":"./node/index.mjs","require":"./node/index.js"},"default":{"import":"./node/index.mjs","require":"./node/index.js"}},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r tsm -r ./test/_polyfill.ts bench/index.ts","build":"rollup -c","format":"prettier --write --list-different \"{*,examples/*/**,.github/**/*}.+(ts|tsx|json|yml|md)\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts -i suites","typecheck":"tsc --noEmit"},"devDependencies":{"@marais/tsconfig":"0.0.2","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@rollup/plugin-node-resolve":"13.1.1","@types/node":"16.11.11","prettier":"2.5.1","rollup":"2.61.1","rollup-plugin-dts":"4.0.1","rollup-plugin-filesize":"9.1.1","rollup-plugin-terser":"7.0.2","rollup-plugin-typescript2":"0.31.1","tslib":"2.3.1","tsm":"2.2.1","typescript":"4.5.4","uvu":"0.5.2"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"16.11.0"},"readme":"<img src=\"logo.svg\" alt=\"meros\">\n<br />\n<br />\n\n<div align=\"right\">\n\t<p><code>npm add meros</code> makes reading multipart responses simple</p>\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions/workflows/ci.yml\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/actions/workflows/ci.yml/badge.svg\"/>\n\t\t</a>\n\t\t<a href=\"https://npm-stat.com/charts.html?package=meros\">\n    \t\t<img src=\"https://badgen.net/npm/dw/meros?labelColor=black&color=black&cache=600\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros?labelColor=black&color=black\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n  <br />\n  <br />\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Seemless api\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser/Node Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## üöÄ Usage\n\n> Visit [/examples](/examples) for more info!\n\n```ts\n// Relies on bundler/environment detection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).pipe(\n  tap((part) => {\n    // Do something with it\n  }),\n);\n```\n\n## _Specific Environment_\n\n#### _Browser_\n\n```ts\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/api').then(meros);\n```\n\n#### _Node_\n\n```ts\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://example.com/api`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üîé API\n\nMeros offers two flavours, both for the browser and for node; but their api's are fundamentally the same.\n\n> **Note:** The type `Response` is used loosely here and simply alludes to Node's `IncomingMessage` or the browser's\n> `Response` type.\n\n### `meros(response: Response, options?: Options)`\n\nReturns: `Promise<Response | AsyncGenerator<Part | Part[]>`\n\nMeros returns a promise that will resolve to an `AsyncGenerator` if the response is of `multipart/mixed` mime, or simply\nreturns the `Response` if something else; helpful for middlewares. The idea here being that you run meros as a chain off\nfetch.\n\n```ts\nfetch('/api').then(meros);\n```\n\n> If the `content-type` is **NOT** a multipart, then meros will resolve with the response argument.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/api'); // Assume this isnt multipart\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\neach `Part` gives you access to:\n\n- `json: boolean` ~ Tells you the `body` would be a JavaScript object of your defined generic `T`.\n- `headers: object` ~ A key-value pair of all headers discovered from this part.\n- `body: T | Fallback` ~ Is the _body_ of the part, either as a JavaScript object (noted by `json`) _or_ the base type\n  of the environment (`Buffer | string`, for Node and Browser respectively).\n\n#### `options.multiple: boolean`\n\nDefault: `false`\n\nSetting this to `true` will yield once for all available parts of a chunk, rather than yielding once per part. This is\nan optimization technique for technologies like GraphQL where rather than commit the payload to the store, to be\nadded-to in the next process-tick we can simply do that synchronously.\n\n> **Important:** This will alter the behaviour and yield arrays‚Äîthan yield payloads.\n\n```ts\nconst chunks = await fetch('/api').then((response) => meros(response, { multiple: true }));\n\n// As a simple Async Generator\nfor await (const parts of chunks) {\n  for (const part of parts) {\n    // Do something with this part, maybe aggregate?\n  }\n}\n```\n\n## üí® Benchmark\n\n> via the [`/bench`](/bench) directory with Node v16.11.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 262,515 ops/sec ¬±2.45% (77 runs sampled)\n  it-multipart              x 165,562 ops/sec ¬±0.99% (79 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 864,124 ops/sec ¬±0.77% (80 runs sampled)\n  fetch-multipart-graphql   x 283,296 ops/sec ¬±0.96% (82 runs sampled)\n```\n\n## üéí Notes\n\nWhy the name? _meros_ comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't there yet. That being said, you may very\nwell use this library in other scenarios like streaming in file form uploads.\n\nAnother goal here is to aide in being the defacto standard transport library to support\n[`@defer` and `@stream` GraphQL directives](https://foundation.graphql.org/news/2020/12/08/improving-latency-with-defer-and-stream-directives/)\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this time.\n- No support for [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance guidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"8da972ef7c409523421518666baa3c92c4319e98","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.2.0-next.3","_nodeVersion":"16.11.0","_npmVersion":"8.0.0","dist":{"integrity":"sha512-oKWZs8c0cTVT9gFT68T3jNGuJAIsNofKYbx15Qr95lTQRsp8yx8dlAdc2LoK8rZttG1wOc5DTjttLWe4aGhWOg==","shasum":"6d76c7bdfc4dba443b9a708c25206cb3011d4b9f","tarball":"https://registry.npmjs.org/meros/-/meros-1.2.0-next.3.tgz","fileCount":11,"unpackedSize":29472,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhwy1kCRA9TVsSAnZWagAAvEcP/0tJFgJaL1foox43Njhe\nyvlmEFBL9De9zSwS3Qv5Fltpk/PesfVKteJflR2uBs96i3K2DFZopQbdisQH\nGA5NPouhgF656UTUUZvHx94778TX6rSNp7JfRh7nRsC4BpK9z/6qEkjIfiz3\n0Ul434PXAM/vB14O/0MlKfhtgiyl7ylpxgjhTtpXnaEQjox4oGmBzaN47OuG\nwwJtx/vRLh5O1tk29dnf/S+63Q8pxh2WDIwrRP+fIIT3f+ulWPzSIsqgj8Ln\n5ELPf+PYpDzPEz9Wd4kDvhr9jOskFuVRWruxCx5kTK9TO5L+ohQ2oC0RuAtf\nQ7+1rw6ARNpKULH/7F/kj/fXAiYFgeclp+uSFtlJz5Zg8SrP/xHKboPQHO0d\nO3vGLkKcXrRJqwiBAy3dDoxtEKKLLkST3A704Yit7D7Sg9G0oC5a6pdLbvk8\nWtzWibNglse3FeJSmxcUU5afcZQRUJkyfVxIcz6PdxgBWlWrXCnL/KnvpxJX\nvVckrGuusFa7DqzLgaushLJmiKK/jxJ/vAaUZjLNp7YwULk7mw8/+URW+YCv\nQcRvS4xoIMByhagmOr3+TPcOIPWlvFZubaUYzaKodvVwSrEP7g8OqYa/opGy\nebzExDfXCQWqS90JnGRuZNEIk3FmHoZ32rnmMHMH/nk0NBjgwJhb2TDH1TfI\n8wfi\r\n=8XX2\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDBCSs2QLvQFEIgevOrFjuCJxlaOjlMz8+0AXg2/AEIOAIgAx4RyaP/S+gzN0g0ot6dVcjvOOFr3aNHzktZabjjKHw="}]},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.2.0-next.3_1640181092668_0.6927179546678468"},"_hasShrinkwrap":false},"1.2.0-next.4":{"name":"meros","version":"1.2.0-next.4","description":"A fast 626B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"node":{"import":"./node/index.mjs","require":"./node/index.js"},"default":{"import":"./node/index.mjs","require":"./node/index.js"}},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r tsm -r ./test/_polyfill.ts bench/index.ts","build":"rollup -c","format":"prettier --write --list-different \"{*,examples/*/**,.github/**/*}.+(ts|tsx|json|yml|md)\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts -i suites","typecheck":"tsc --noEmit"},"devDependencies":{"@marais/tsconfig":"0.0.2","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@rollup/plugin-node-resolve":"13.1.1","@types/node":"17.0.2","prettier":"2.5.1","rollup":"2.61.1","rollup-plugin-dts":"4.0.1","rollup-plugin-terser":"7.0.2","tsm":"2.2.1","typescript":"4.5.4","uvu":"0.5.2"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"17.3.0"},"readme":"<img src=\"logo.svg\" alt=\"meros\">\n<br />\n<br />\n\n<div align=\"right\">\n\t<p><code>npm add meros</code> makes reading multipart responses simple</p>\n\t<span>\n\t\t<a href=\"https://github.com/maraisr/meros/actions/workflows/ci.yml\">\n\t\t\t<img src=\"https://github.com/maraisr/meros/actions/workflows/ci.yml/badge.svg\"/>\n\t\t</a>\n\t\t<a href=\"https://npm-stat.com/charts.html?package=meros\">\n    \t\t<img src=\"https://badgen.net/npm/dw/meros?labelColor=black&color=black&cache=600\" alt=\"downloads\"/>\n\t\t</a>\n\t\t<a href=\"https://bundlephobia.com/result?p=meros\">\n\t\t\t<img src=\"https://badgen.net/bundlephobia/minzip/meros?labelColor=black&color=black\" alt=\"size\"/>\n\t\t</a>\n\t</span>\n  <br />\n  <br />\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Seemless api\n- Super [performant](#-benchmark)\n- Supports _any_<sup>1</sup> `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser/Node Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n## üöÄ Usage\n\n> Visit [/examples](/examples) for more info!\n\n```ts\n// Relies on bundler/environment detection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).subscribe((part) => {\n  // Do something with it\n});\n```\n\n## _Specific Environment_\n\n#### _Browser_\n\n```ts\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/api').then(meros);\n```\n\n#### _Node_\n\n```ts\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://example.com/api`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üîé API\n\nMeros offers two flavours, both for the browser and for node; but their api's are fundamentally the same.\n\n> **Note:** The type `Response` is used loosely here and simply alludes to Node's `IncomingMessage` or the browser's\n> `Response` type.\n\n### `meros(response: Response, options?: Options)`\n\nReturns: `Promise<Response | AsyncGenerator<Part | Part[]>`\n\nMeros returns a promise that will resolve to an `AsyncGenerator` if the response is of `multipart/mixed` mime, or simply\nreturns the `Response` if something else; helpful for middlewares. The idea here being that you run meros as a chain off\nfetch.\n\n```ts\nfetch('/api').then(meros);\n```\n\n> If the `content-type` is **NOT** a multipart, then meros will resolve with the response argument.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/api'); // Assume this isnt multipart\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\neach `Part` gives you access to:\n\n- `json: boolean` ~ Tells you the `body` would be a JavaScript object of your defined generic `T`.\n- `headers: object` ~ A key-value pair of all headers discovered from this part.\n- `body: T | Fallback` ~ Is the _body_ of the part, either as a JavaScript object (noted by `json`) _or_ the base type\n  of the environment (`Buffer | string`, for Node and Browser respectively).\n\n#### `options.multiple: boolean`\n\nDefault: `false`\n\nSetting this to `true` will yield once for all available parts of a chunk, rather than yielding once per part. This is\nan optimization technique for technologies like GraphQL where rather than commit the payload to the store, to be\nadded-to in the next process-tick we can simply do that synchronously.\n\n> **Important:** This will alter the behaviour and yield arrays‚Äîthan yield payloads.\n\n```ts\nconst chunks = await fetch('/api').then((response) => meros(response, { multiple: true }));\n\n// As a simple Async Generator\nfor await (const parts of chunks) {\n  for (const part of parts) {\n    // Do something with this part, maybe aggregate?\n  }\n}\n```\n\n## üí® Benchmark\n\n> via the [`/bench`](/bench) directory with Node v16.11.0\n\n```\nValidation :: node\n‚úî meros\n‚úò it-multipart (FAILED @ \"should match reference patch set\")\n\nBenchmark :: node\n  meros                     x 262,515 ops/sec ¬±2.45% (77 runs sampled)\n  it-multipart              x 165,562 ops/sec ¬±0.99% (79 runs sampled)\n\nValidation :: browser\n‚úî meros\n‚úò fetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n\nBenchmark :: browser\n  meros                     x 864,124 ops/sec ¬±0.77% (80 runs sampled)\n  fetch-multipart-graphql   x 283,296 ops/sec ¬±0.96% (82 runs sampled)\n```\n\n## üéí Notes\n\nWhy the name? _meros_ comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't there yet. That being said, you may very\nwell use this library in other scenarios like streaming in file form uploads.\n\nAnother goal here is to aide in being the defacto standard transport library to support\n[`@defer` and `@stream` GraphQL directives](https://foundation.graphql.org/news/2020/12/08/improving-latency-with-defer-and-stream-directives/)\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this time.\n- No support for [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance guidance and high level api design.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n<details>\n<summary>Footnote</summary>\n\n> 1: By default, we'll look for JSON, and parse that for you. If not, we'll give you the body as what was streamed.\n\n</details>\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","gitHead":"922cfe244297a807734c0450f1102c5dfaf8dc28","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.2.0-next.4","_nodeVersion":"17.3.0","_npmVersion":"8.3.0","dist":{"integrity":"sha512-Cf/wlu3IA8QhOAXwRR3KI//SUTSu4U+QGNaJ4tk278m6Lu1UtOBnAOIDYI5D3W+dDT74q6zQr8VMRGnCebjRBg==","shasum":"480c91d76d409d6a32ee5a633954aae04b93b03a","tarball":"https://registry.npmjs.org/meros/-/meros-1.2.0-next.4.tgz","fileCount":11,"unpackedSize":29149,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJhxYinCRA9TVsSAnZWagAA5X4QAJrUAoy5BBhD1BH3KhCp\ne4+vKMaUetxFzyQQeis9IwgAmzQWK3ah8YG/PbAmQ5FFBAjj5bdTs7Krqeja\nlXYLWp+CSdUXMM6VaXLEOeWn8D++iUV/HfMi8DNvEfO2NFhUYQuJlBTYi7kb\n7G0Vsijp04k1trVYHB2P/KGBWabnPQzcsV6jkizQcP1UtqqFZYXDrYkndyGL\nEQWZw0jkmaFk81KdqTd3E4gnGigZ0peqmvF6qtrLqxhQucF/FyZyGE28JNId\n/or9BP7vmEjyBYFVzaSYcU+9jjMqBWZF/NMP3wHbGnVQ5C2/BYSjxT7ZC7Y2\nk3YL90fN0EISaYZKrbMBWAeReg1NdeaWY1x393Vhz86JpNEM+PxaXJrXx+XD\nXr/FXxtdvRct3CuS99ia4uKNzR4nnM8punjhw2My672yBw/mSxWNloNG+6fL\n/qnEuRfScgMrkaeswH15TiulUn9ldvWgpOloec4Mplexn3OvMNg0TIVDMBIp\nrsW/RXUCtClPE2G+tz1k69GsVacObHr+skFPDPoMP13PDy62oJ9hiZTbYZO/\n6Llfjcc/o4rS3NkVAdry4VtHOEgcYoHLE5GneBZbx2EqPFXDr/aWQuNE4sIx\nnSIHtnIi6PC0hTtPGcQkIm1l74NwEV0pGGAJSfdTBkB2Y9ZT4BJZkj85JMax\n2AoT\r\n=e9dt\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBvkli/BqB1XSAD0QslZ1V3FYpugBvhdAcXkIy/67ehvAiEAuyp1Mlnh46mLK2RLr1/9a34eEuf6FI8gQgnY29CImlE="}]},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.2.0-next.4_1640335527831_0.5562149100667162"},"_hasShrinkwrap":false},"1.2.0":{"name":"meros","version":"1.2.0","description":"A fast 626B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"node":{"import":"./node/index.mjs","require":"./node/index.js"},"default":{"import":"./node/index.mjs","require":"./node/index.js"}},"./browser":{"import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","unpkg":"browser/index.min.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r tsm -r ./test/_polyfill.ts bench/index.ts","build":"rollup -c","format":"prettier --write --list-different \"{*,examples/*/**,.github/**/*}.+(ts|tsx|json|yml|md)\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts -i suites","typecheck":"tsc --noEmit"},"devDependencies":{"@marais/tsconfig":"0.0.2","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@rollup/plugin-node-resolve":"13.1.3","@types/node":"17.0.21","prettier":"2.5.1","rollup":"2.68.0","rollup-plugin-dts":"4.1.0","rollup-plugin-terser":"7.0.2","tsm":"2.2.1","typescript":"4.5.5","uvu":"0.5.3"},"peerDependencies":{"@types/node":">=12"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=12"},"volta":{"node":"17.3.0"},"gitHead":"399032e54dc362c1690d89b4e0c6a12c938af784","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.2.0","_nodeVersion":"17.3.0","_npmVersion":"8.3.0","dist":{"integrity":"sha512-3QRZIS707pZQnijHdhbttXRWwrHhZJ/gzolneoxKVz9N/xmsvY/7Ls8lpnI9gxbgxjcHsAVEW3mgwiZCo6kkJQ==","shasum":"096cdede2eb0b1610b219b1031b935260de1ad08","tarball":"https://registry.npmjs.org/meros/-/meros-1.2.0.tgz","fileCount":11,"unpackedSize":29143,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJiGwb6ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpVew//bqGVPr54FSpxgGFBwhyr8GAR1zCZ+SBNMpN38Vr+0y3SuPzI\r\nvrCp7LYRJqNx96F6GzwDXaIZKSnTfQ1wCelKeXfnc5SGqLE3i/YHHKo+miGP\r\nWLiVm5yZUk5Jhzw51FGm+G20CNxN9azlABXPiFgUCXba8ylWF7mX299MifoG\r\ncsmfe5Tie+SJbgjurZx59hezxJulQFTAI0txAOZAEGa2l5chVTYf1/c7yktT\r\nGQn/lprn8Z1x+eIATy4C6W/xyPpoj3rw4l4H3wI9n6ayn7TCZHV1Lj+19sx5\r\nnKZfsYYIwoXtGIM8foLcIzYtGRhR1HL/M82LmCyTG2iJSKIr3T/C5V28eTc/\r\nqCIa+rTKR1PYnmCmctKDhWdsUKlVRUIWR5qcHLUljHLcfxfPvxb92RQg854U\r\njJBYzh8rO2ww/0aRYR4ug1rZmA17m6IXDKUwOdB2b7k4El00HLMWrld7fdbA\r\n4yKqidIdkQBZUZovKRrOLd5K/wQCLmwRk7WDEzGjIuEhtoA2XMqpYk4yuF18\r\nfR7kdhYlKSnJCuStEyf1PELhSf1KjcgU+FfqfhEwB/2yc710EqE+rIWN4nIC\r\ngWILikMlp5tOg52AvYbJZvIDAsyFjA+e/HcdDIgH2Hdn6lG5N37rNeOvZB0m\r\nkZtUA7FpWTz/oUi8+suvU+2zdZm8/9TmrKE=\r\n=UzgR\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCOUW01UYOHgDfPoSZJsyvIkxxclk3OTeUvaYoAIKMKAAIhAKWYv8BFQo4NDM6EAEB+M7piTtR/BW42i5yLaHVQXYIB"}]},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.2.0_1645938426641_0.1803065797924528"},"_hasShrinkwrap":false},"1.2.1":{"name":"meros","version":"1.2.1","description":"A fast 626B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossouw","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"browser":{"types":"./browser/index.d.ts","import":"./browser/index.mjs","require":"./browser/index.js"},"node":{"types":"./node/index.d.ts","import":"./node/index.mjs","require":"./node/index.js"},"default":{"types":"./node/index.d.ts","import":"./node/index.mjs","require":"./node/index.js"}},"./browser":{"types":"./browser/index.d.ts","import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"types":"./node/index.d.ts","import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"node -r tsm -r ./test/_polyfill.ts bench/index.ts","build":"bundt --minify","format":"prettier --write --list-different \"{*,test/**/*,examples/*/**,.github/**/*}.+(ts|tsx|json|yml|md)\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts -i suites","typecheck":"tsc --noEmit"},"devDependencies":{"@marais/tsconfig":"0.0.3","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@types/node":"18.7.16","bundt":"2.0.0-next.5","prettier":"2.7.1","tsm":"2.2.2","typescript":"4.8.3","uvu":"0.5.3"},"peerDependencies":{"@types/node":">=13"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=13"},"volta":{"node":"18.0.0"},"gitHead":"d9ab2d15dd817432f3f00992ac52f8b3d83ce12c","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.2.1","_nodeVersion":"18.0.0","_npmVersion":"8.6.0","dist":{"integrity":"sha512-R2f/jxYqCAGI19KhAvaxSOxALBMkaXWH2a7rOyqQw+ZmizX5bKkEYWLzdhC+U82ZVVPVp6MCXe3EkVligh+12g==","shasum":"056f7a76e8571d0aaf3c7afcbe7eb6407ff7329e","tarball":"https://registry.npmjs.org/meros/-/meros-1.2.1.tgz","fileCount":10,"unpackedSize":15748,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFgK/ElL+7yioLPKnlUq2ijtVeXR/+DWyWwciGJbSwyRAiEAmtxBV2nWHIZXmIE8qFyX2aOHPrGGZk8bFyNWPr1qNtc="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjKZ1/ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmorTQ//f43W/evZDFbDa1nFjH2lfxUyBFkQdBQzakxPDZV02icy9XE2\r\nDLTcVcS4WlMKiX8u3YksggvHs3qJeoaQziQfy0mtAD/kJ95m40Hlx+EPY++1\r\n/fNkAXizVzdKx944BVKYqWdKHQZkq72/fUNFfQJUsJLJa3U65O82I4u1+hF7\r\nlrabQXzpOVFZhE0GCJCbSCraGvlopi4+LZh3lcnu//SK0UaD16yhkczSNTov\r\nbNQDqSZ91qB3gNmZxz2zIPI1RAwBkoyFKZCL0DqN6vCp3DbV+M7JY57lAnMu\r\nbdgL86J4f2ruNmc5UpmD980HH2e31khqjFjoZt2fIwnOsnl2Bs1PQOQFEcTC\r\nLntAWrbLoa6oeNcC5JuJ2vC4spnX22vB+kTWdqqRsv3I9r49jeuxRGdepB6v\r\nREDOjYW40vT6cH/gyesHUCkqHMfyDVj12JkOwKQS85WCjlR19JrhnI6ThpSE\r\nsgkRo2A5mmQzkfCxEqDj1TKue/Vw61lrMemICo3fcBng5vjIuoylI+GTyc12\r\nYDV2AeTvErY2CkxZK5PHa88/CrgbrKZj4q2SSM9omTkejI0Wsz6wlnssdngt\r\nDY5ITBSpp4GJangN7ITT1AKO3ZsTYKlPIV5cjH1sF9YgW0RGzMWvCRD16D4d\r\n7lv28ySqvcSKqp0cRMK5muM30JgJVid2k/Y=\r\n=cLDN\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.2.1_1663671679378_0.2626647373617135"},"_hasShrinkwrap":false},"1.3.0":{"name":"meros","version":"1.3.0","description":"A fast 642B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"license":"MIT","author":{"name":"Marais Rossow","email":"me@marais.dev","url":"https://marais.io"},"sideEffects":false,"exports":{".":{"browser":{"types":"./browser/index.d.ts","import":"./browser/index.mjs","require":"./browser/index.js"},"node":{"types":"./node/index.d.ts","import":"./node/index.mjs","require":"./node/index.js"},"default":{"types":"./node/index.d.ts","import":"./node/index.mjs","require":"./node/index.js"}},"./browser":{"types":"./browser/index.d.ts","import":"./browser/index.mjs","require":"./browser/index.js"},"./node":{"types":"./node/index.d.ts","import":"./node/index.mjs","require":"./node/index.js"},"./package.json":"./package.json"},"main":"node/index.js","module":"node/index.mjs","browser":"browser/index.mjs","types":"index.d.ts","scripts":{"bench":"tsm -r ./test/_polyfill.ts bench/index.ts","build":"bundt --minify","format":"prettier --write --list-different \"{*,{src,examples,test}/**/*,.github/**/*}.{ts,tsx,json,yml,md}\"","prepublishOnly":"pnpm run build","test":"uvu test \".spec.ts$\" -r tsm -r test/_polyfill.ts -i suites","typecheck":"tsc --noEmit"},"prettier":"@marais/prettier","devDependencies":{"@marais/prettier":"0.0.2","@marais/tsconfig":"0.0.4","@n1ru4l/push-pull-async-iterable-iterator":"3.2.0","@types/node":"20.1.7","bundt":"2.0.0-next.5","prettier":"2.8.8","tsm":"2.3.0","typescript":"5.0.4","uvu":"0.5.3"},"peerDependencies":{"@types/node":">=13"},"peerDependenciesMeta":{"@types/node":{"optional":true}},"engines":{"node":">=13"},"volta":{"node":"18.0.0"},"gitHead":"379f53d60775d9fc22d263257ae6a00300a9cc0f","bugs":{"url":"https://github.com/maraisr/meros/issues"},"homepage":"https://github.com/maraisr/meros#readme","_id":"meros@1.3.0","_nodeVersion":"18.0.0","_npmVersion":"8.6.0","dist":{"integrity":"sha512-2BNGOimxEz5hmjUG2FwoxCt5HN7BXdaWyFqEwxPTrJzVdABtrL4TiHTcsWSFAxPQ/tOnEaQEJh3qWq71QRMY+w==","shasum":"c617d2092739d55286bf618129280f362e6242f2","tarball":"https://registry.npmjs.org/meros/-/meros-1.3.0.tgz","fileCount":10,"unpackedSize":15335,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDAZ7JgEhV3v3JtDQlwbqrpuFPVUClAj1hmhSUSbOBRzgIhAIeEeuDDdJ2xVrt6hm2sWHmWxIrCRCyxTW+MF58AIkpv"}]},"_npmUser":{"name":"marais","email":"me@marais.co"},"directories":{},"maintainers":[{"name":"marais","email":"me@marais.co"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/meros_1.3.0_1685086180797_0.41412788288264424"},"_hasShrinkwrap":false}},"time":{"created":"2020-07-07T10:56:20.086Z","0.0.1":"2020-07-07T10:56:20.217Z","modified":"2023-05-26T07:29:41.127Z","0.0.2":"2020-07-24T04:05:49.180Z","0.0.3":"2020-10-08T11:54:13.500Z","1.0.0-beta.1":"2020-11-10T06:53:59.436Z","1.0.0-beta.2":"2020-11-10T07:12:06.234Z","1.0.0-beta.3":"2020-11-10T07:20:15.566Z","1.0.0-beta.4":"2020-11-11T02:45:09.751Z","1.0.0-beta.5":"2020-11-12T12:43:27.445Z","1.0.0-beta.6":"2020-11-13T22:52:26.358Z","1.0.0-beta.7":"2020-11-14T00:41:17.849Z","1.0.0-beta.8":"2020-11-18T00:13:52.243Z","1.0.0-beta.9":"2020-11-18T00:16:59.294Z","1.0.0-beta.10":"2020-11-22T21:34:10.702Z","1.0.0-beta.11":"2020-11-23T09:12:03.706Z","1.0.0":"2021-01-26T06:41:02.444Z","1.1.0-beta.1":"2021-02-02T23:45:17.434Z","1.1.0-beta.2":"2021-02-03T08:52:25.523Z","1.1.0":"2021-02-09T06:32:34.475Z","1.1.1":"2021-02-09T08:58:06.841Z","1.1.2":"2021-02-09T09:02:00.566Z","1.1.3":"2021-02-22T22:08:24.416Z","1.1.4":"2021-02-22T22:31:20.237Z","1.2.0-next.1":"2021-12-22T12:21:51.082Z","1.2.0-next.2":"2021-12-22T12:26:09.690Z","1.2.0-next.3":"2021-12-22T13:51:32.818Z","1.2.0-next.4":"2021-12-24T08:45:27.989Z","1.2.0":"2022-02-27T05:07:06.785Z","1.2.1":"2022-09-20T11:01:19.536Z","1.3.0":"2023-05-26T07:29:41.010Z"},"maintainers":[{"name":"marais","email":"me@marais.co"}],"description":"A fast 642B utility that makes reading multipart responses simple","keywords":["defer","fetch","graphql","multipart mixed","multipart","reader","stream","utility"],"author":{"name":"Marais Rossow","email":"me@marais.dev","url":"https://marais.io"},"readme":"<img src=\"logo.svg\" alt=\"meros\">\n\n<br />\n<br />\n\n<div align=\"right\">\n\n`npm add meros` makes reading multipart responses simple\n\n[![npm stats](https://badgen.net/npm/dw/meros)](https://npm-stat.com/charts.html?package=meros)\n[![bundle size](https://badgen.net/bundlephobia/minzip/meros)](https://bundlephobia.com/result?p=meros)\n\n<br />\n\n</div>\n\n## ‚ö° Features\n\n- No dependencies\n- Seemless api\n- Super [performant](#-benchmark)\n- Supports _any_[^1] `content-type`\n- _preamble_ and _epilogue_ don't yield\n- Browser/Node Compatible\n- Plugs into existing libraries like Relay and rxjs\n\n[^1]: By default, we'll look for JSON, and parse that for you. If not, we'll give you the body as what was streamed.\n\n## üöÄ Usage\n\n> Visit [/examples](/examples) for more info!\n\n```ts\n// Relies on bundler/environment detection\nimport { meros } from 'meros';\n\nconst parts = await fetch('/api').then(meros);\n\n// As a simple Async Generator\nfor await (const part of parts) {\n  // Do something with this part\n}\n\n// Used with rxjs streams\nfrom(parts).subscribe((part) => {\n  // Do something with it\n});\n```\n\n## _Specific Environment_\n\n#### _Browser_\n\n```ts\nimport { meros } from 'meros/browser';\n// import { meros } from 'https://cdn.skypack.dev/meros';\n\nconst parts = await fetch('/api').then(meros);\n```\n\n#### _Node_\n\n```ts\nimport http from 'http';\nimport { meros } from 'meros/node';\n\nconst response = await new Promise((resolve) => {\n  const request = http.get(`http://example.com/api`, (response) => {\n    resolve(response);\n  });\n  request.end();\n});\n\nconst parts = await meros(response);\n```\n\n## üîé API\n\nMeros offers two flavours, both for the browser and for node; but their api's are fundamentally the same.\n\n> **Note**: The type `Response` is used loosely here and simply alludes to Node's `IncomingMessage` or the browser's\n> `Response` type.\n\n### `meros(response: Response, options?: Options)`\n\nReturns: `Promise<Response | AsyncGenerator<Part | Part[]>`\n\nMeros returns a promise that will resolve to an `AsyncGenerator` if the response is of `multipart/mixed` mime, or simply\nreturns the `Response` if something else; helpful for middlewares. The idea here being that you run meros as a chain off\nfetch.\n\n```ts\nfetch('/api').then(meros);\n```\n\n> If the `content-type` is **NOT** a multipart, then meros will resolve with the response argument.\n>\n> <details>\n> <summary>Example on how to handle this case</summary>\n>\n> ```ts\n> import { meros } from 'meros';\n>\n> const response = await fetch('/api'); // Assume this isnt multipart\n> const parts = await meros(response);\n>\n> if (parts[Symbol.asyncIterator] < 'u') {\n>   for await (const part of parts) {\n>     // Do something with this part\n>   }\n> } else {\n>   const data = await parts.json();\n> }\n> ```\n>\n> </details>\n\neach `Part` gives you access to:\n\n- `json: boolean` ~ Tells you the `body` would be a JavaScript object of your defined generic `T`.\n- `headers: object` ~ A key-value pair of all headers discovered from this part.\n- `body: T | Fallback` ~ Is the _body_ of the part, either as a JavaScript object (noted by `json`) _or_ the base type\n  of the environment (`Buffer | string`, for Node and Browser respectively).\n\n#### `options.multiple: boolean`\n\nDefault: `false`\n\nSetting this to `true` will yield once for all available parts of a chunk, rather than yielding once per part. This is\nan optimization technique for technologies like GraphQL where rather than commit the payload to the store, to be\nadded-to in the next process-tick we can simply do that synchronously.\n\n> **Warning**: This will alter the behaviour and yield arrays‚Äîthan yield payloads.\n\n```ts\nconst chunks = await fetch('/api').then((response) => meros(response, { multiple: true }));\n\n// As a simple Async Generator\nfor await (const parts of chunks) {\n  for (const part of parts) {\n    // Do something with this part, maybe aggregate?\n  }\n}\n```\n\n## üí® Benchmark\n\n> via the [`/bench`](/bench) directory with Node v18.0.0\n\n```\nNode\n‚úî meros        ~ 1,271,218 ops/sec ¬± 0.84%\n‚úò it-multipart ~   700,039 ops/sec ¬± 0.72%\n--\nit-multipart (FAILED @ \"should match reference patch set\")\n\nBrowser\n‚úî meros                   ~ 800,941 ops/sec ¬± 1.06%\n‚úò fetch-multipart-graphql ~ 502,175 ops/sec ¬± 0.75%\n--\nfetch-multipart-graphql (FAILED @ \"should match reference patch set\")\n```\n\n## üéí Notes\n\nWhy the name? _meros_ comes from Ancient Greek ŒºŒ≠œÅŒøœÇ m√©ros, meaning \"part\".\n\nThis library aims to implement [RFC1341] in its entirety, however we aren't there yet. That being said, you may very\nwell use this library in other scenarios like streaming in file form uploads.\n\nAnother goal here is to aide in being the defacto standard transport library to support\n[`@defer` and `@stream` GraphQL directives](https://foundation.graphql.org/news/2020/12/08/improving-latency-with-defer-and-stream-directives/)\n\n### _Caveats_\n\n- No support the `/alternative` , `/digest` _or_ `/parallel` subtype at this time.\n- No support for [nested multiparts](https://tools.ietf.org/html/rfc1341#appendix-C)\n\n## ‚ù§ Thanks\n\nSpecial thanks to [Luke Edwards](https://github.com/lukeed) for performance guidance and high level api design.\n\n## üòá Compassion\n\nThis library is simple, a meer few hundred bytes. It's easy to copy, and easy to alter. If you do, that is fine ‚ù§Ô∏è im\nall for the freedom of software. But please give credit where credit is due.\n\n## License\n\nMIT ¬© [Marais Rossouw](https://marais.io)\n\n[rfc1341]: https://tools.ietf.org/html/rfc1341 'The Multipart Content-Type'\n","readmeFilename":"readme.md","homepage":"https://github.com/maraisr/meros#readme","repository":{"type":"git","url":"git+https://github.com/maraisr/meros.git"},"bugs":{"url":"https://github.com/maraisr/meros/issues"},"license":"MIT"}